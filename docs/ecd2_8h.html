<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.19"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>qCrypto: errorcorrection/ecd2.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">qCrypto
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">A collection of code for a practical entanglement-based quantum key distribution system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ecd2_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ecd2.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Error correction demon. (modifications to original errcd see below).  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="defaultdefinitions_8h_source.html">definitions/defaultdefinitions.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="globalvars_8h_source.html">definitions/globalvars.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cascade__biconf_8h_source.html">subcomponents/cascade_biconf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="comms_8h_source.html">subcomponents/comms.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="helpers_8h_source.html">subcomponents/helpers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="qber__estim_8h_source.html">subcomponents/qber_estim.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="thread__mgmt_8h_source.html">subcomponents/thread_mgmt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="debug_8h_source.html">subcomponents/debug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="priv__amp_8h_source.html">subcomponents/priv_amp.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ecd2.h:</div>
<div class="dyncontent">
<div class="center"><img src="ecd2_8h__incl.png" border="0" usemap="#aerrorcorrection_2ecd2_8h" alt=""/></div>
<map name="errorcorrection_2ecd2_8h" id="aerrorcorrection_2ecd2_8h">
<area shape="rect" title="Error correction demon. (modifications to original errcd see below)." alt="" coords="870,5,1018,32"/>
<area shape="rect" href="defaultdefinitions_8h.html" title="Definition file for default variables in ecd2." alt="" coords="23,423,217,449"/>
<area shape="rect" href="globalvars_8h.html" title="Definition file for global variables and arguments in ecd2." alt="" coords="377,341,532,367"/>
<area shape="rect" href="helpers_8h.html" title="helper functions or helper enums for ecd2" alt="" coords="683,423,866,449"/>
<area shape="rect" href="cascade__biconf_8h.html" title="Cascade biconf algorithm implementation." alt="" coords="987,80,1154,121"/>
<area shape="rect" href="comms_8h.html" title="code on communications w.r.t. error correction." alt="" coords="1338,259,1414,285"/>
<area shape="rect" href="debug_8h.html" title="debugging helper functions for ecd2" alt="" coords="1570,341,1638,367"/>
<area shape="rect" href="priv__amp_8h.html" title="privacy amplification portions of the code" alt="" coords="819,177,906,203"/>
<area shape="rect" href="thread__mgmt_8h.html" title=" " alt="" coords="884,259,993,285"/>
<area shape="rect" href="qber__estim_8h.html" title=" " alt="" coords="1186,169,1329,211"/>
<area shape="rect" title=" " alt="" coords="89,497,151,524"/>
<area shape="rect" href="packets_8h.html" title=" " alt="" coords="1242,423,1321,449"/>
<area shape="rect" href="keyblock_8h.html" title="Header file containing the definitions of the keyblock &amp; block related data for the error correction ..." alt="" coords="1452,497,1612,524"/>
<area shape="rect" href="rnd_8h.html" title="Random number sources." alt="" coords="463,497,513,524"/>
<area shape="rect" href="proc__state_8h.html" title="Defines processing states." alt="" coords="1169,333,1292,375"/>
<area shape="rect" href="pkt__header__7_8h.html" title=" " alt="" coords="556,333,687,375"/>
<area shape="rect" href="pkt__header__3_8h.html" title=" " alt="" coords="812,333,943,375"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ecd2_8h__dep__incl.png" border="0" usemap="#aerrorcorrection_2ecd2_8hdep" alt=""/></div>
<map name="errorcorrection_2ecd2_8hdep" id="aerrorcorrection_2ecd2_8hdep">
<area shape="rect" title="Error correction demon. (modifications to original errcd see below)." alt="" coords="5,5,153,32"/>
<area shape="rect" href="ecd2_8c.html" title=" " alt="" coords="5,80,153,107"/>
</map>
</div>
</div>
<p><a href="ecd2_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acd2e1b2dee36ccbff485d8e70b117170"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ecd2_8h.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a> (int code)</td></tr>
<tr class="memdesc:acd2e1b2dee36ccbff485d8e70b117170"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print error message based on err code.  <a href="ecd2_8h.html#acd2e1b2dee36ccbff485d8e70b117170">More...</a><br /></td></tr>
<tr class="separator:acd2e1b2dee36ccbff485d8e70b117170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a533d8ed350c93589b514cc9b2d7ec4e6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ecd2_8h.html#a533d8ed350c93589b514cc9b2d7ec4e6">parse_options</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a533d8ed350c93589b514cc9b2d7ec4e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse arguments on initialization.  <a href="ecd2_8h.html#a533d8ed350c93589b514cc9b2d7ec4e6">More...</a><br /></td></tr>
<tr class="separator:a533d8ed350c93589b514cc9b2d7ec4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2a9111d875db77ed0a97a433177d750"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ecd2_8h.html#ac2a9111d875db77ed0a97a433177d750">has_pipe_event</a> (fd_set *readqueue_ptr, fd_set *writequeue_ptr, int selectmax, <a class="el" href="defaultdefinitions_8h.html#ae7d38601dfbd73adbe5c1b3ec34e0e13">Boolean</a> hasContentToSend, struct timeval <a class="el" href="transferd_8h.html#a03a5df464f7f59f8fe9f8da62642ce06">timeout</a>)</td></tr>
<tr class="memdesc:ac2a9111d875db77ed0a97a433177d750"><td class="mdescLeft">&#160;</td><td class="mdescRight">wait for pipe event (with timeout) using select syscall  <a href="ecd2_8h.html#ac2a9111d875db77ed0a97a433177d750">More...</a><br /></td></tr>
<tr class="separator:ac2a9111d875db77ed0a97a433177d750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3ad63163e9bd051e3a96cee884d1f9c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ecd2_8h.html#aa3ad63163e9bd051e3a96cee884d1f9c">write_into_sendpipe</a> ()</td></tr>
<tr class="memdesc:aa3ad63163e9bd051e3a96cee884d1f9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">write data from next_packet_to_send into sendpipe  <a href="ecd2_8h.html#aa3ad63163e9bd051e3a96cee884d1f9c">More...</a><br /></td></tr>
<tr class="separator:aa3ad63163e9bd051e3a96cee884d1f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc11047ebb7d577c2bef453dcac255b3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ecd2_8h.html#acc11047ebb7d577c2bef453dcac255b3">read_from_cmdpipe</a> (char *cmd_input)</td></tr>
<tr class="memdesc:acc11047ebb7d577c2bef453dcac255b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">read command from cmdpipe into cmd_input  <a href="ecd2_8h.html#acc11047ebb7d577c2bef453dcac255b3">More...</a><br /></td></tr>
<tr class="separator:acc11047ebb7d577c2bef453dcac255b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcf673b3dfbe3832a1908ab68b0a9a43"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ecd2_8h.html#afcf673b3dfbe3832a1908ab68b0a9a43">create_thread_and_start_qber_using_cmd</a> (char *dpnt, char *cmd_input)</td></tr>
<tr class="memdesc:afcf673b3dfbe3832a1908ab68b0a9a43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a thread and start qber based on the cmd stored in cimd_input.  <a href="ecd2_8h.html#afcf673b3dfbe3832a1908ab68b0a9a43">More...</a><br /></td></tr>
<tr class="separator:afcf673b3dfbe3832a1908ab68b0a9a43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a512509fe92d58e86e974fa3944b2e93c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ecd2_8h.html#a512509fe92d58e86e974fa3944b2e93c">process_command</a> (char *in)</td></tr>
<tr class="memdesc:a512509fe92d58e86e974fa3944b2e93c"><td class="mdescLeft">&#160;</td><td class="mdescRight">process an input string, terminated with 0, from the command pipe  <a href="ecd2_8h.html#a512509fe92d58e86e974fa3944b2e93c">More...</a><br /></td></tr>
<tr class="separator:a512509fe92d58e86e974fa3944b2e93c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab80cb55a1207c201017b8454c3921021"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ecd2_8h.html#ab80cb55a1207c201017b8454c3921021">read_header_from_receivepipe</a> ()</td></tr>
<tr class="memdesc:ab80cb55a1207c201017b8454c3921021"><td class="mdescLeft">&#160;</td><td class="mdescRight">read header from receivepipe into msgprotobuf, then malloc a buffer and point to it with readbuf  <a href="ecd2_8h.html#ab80cb55a1207c201017b8454c3921021">More...</a><br /></td></tr>
<tr class="separator:ab80cb55a1207c201017b8454c3921021"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7002d7463cac95a030c281b2bbc0ec63"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ecd2_8h.html#a7002d7463cac95a030c281b2bbc0ec63">read_body_from_receivepipe</a> ()</td></tr>
<tr class="memdesc:a7002d7463cac95a030c281b2bbc0ec63"><td class="mdescLeft">&#160;</td><td class="mdescRight">read message body into buffer pointed by readbuf  <a href="ecd2_8h.html#a7002d7463cac95a030c281b2bbc0ec63">More...</a><br /></td></tr>
<tr class="separator:a7002d7463cac95a030c281b2bbc0ec63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ecd2_8h.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main code.  <a href="ecd2_8h.html#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">GLOBAL VARIABLES (defined in globalvar.h)</div></td></tr>
<tr class="memitem:a7f5d903352c2133a67099abbf29041dc"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structblockpointer.html">blockpointer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ecd2_8h.html#a7f5d903352c2133a67099abbf29041dc">blocklist</a> = NULL</td></tr>
<tr class="separator:a7f5d903352c2133a67099abbf29041dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2ccf7edc49e0e4e4d3f6c40df187f9b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structpacket__to__send.html">packet_to_send</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ecd2_8h.html#ad2ccf7edc49e0e4e4d3f6c40df187f9b">next_packet_to_send</a> = NULL</td></tr>
<tr class="separator:ad2ccf7edc49e0e4e4d3f6c40df187f9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a533147eb4caa484f9a001a15a2a376d5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structpacket__to__send.html">packet_to_send</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ecd2_8h.html#a533147eb4caa484f9a001a15a2a376d5">last_packet_to_send</a> = NULL</td></tr>
<tr class="separator:a533147eb4caa484f9a001a15a2a376d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada59c388a54132792188bb23541d03c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="globalvars_8h.html#ae3d8c060c4264f2c158c036a09f988aa">Arguments</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ecd2_8h.html#ada59c388a54132792188bb23541d03c1">arguments</a></td></tr>
<tr class="memdesc:ada59c388a54132792188bb23541d03c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">contains arguments read in when initializing program  <a href="ecd2_8h.html#ada59c388a54132792188bb23541d03c1">More...</a><br /></td></tr>
<tr class="separator:ada59c388a54132792188bb23541d03c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Static structs &amp; variables (global only within the scope of ecd2)</div></td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Error correction demon. (modifications to original errcd see below). </p>
<p><br  />
 Part of the quantum key distribution software for error correction and privacy amplification. Description see below. Version as of 20071228, works also for Ekert-91 type protocols.</p>
<p>Copyright (C) 2020 Matthew Lee, National University of Singapore <a href="#" onclick="location.href='mai'+'lto:'+'cra'+'zo'+'ter'+'@g'+'mai'+'l.'+'com'; return false;">crazo<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>gmail<span style="display: none;">.nosp@m.</span>.com</a></p>
<p>Copyright (C) 2005-2007 Christian Kurtsiefer, National University of Singapore <a href="#" onclick="location.href='mai'+'lto:'+'chr'+'is'+'tia'+'n.'+'kur'+'ts'+'ief'+'er'+'@gm'+'ai'+'l.c'+'om'; return false;">chris<span style="display: none;">.nosp@m.</span>tian<span style="display: none;">.nosp@m.</span>.kurt<span style="display: none;">.nosp@m.</span>sief<span style="display: none;">.nosp@m.</span>er@gm<span style="display: none;">.nosp@m.</span>ail.<span style="display: none;">.nosp@m.</span>com</a></p>
<p>This source code is free software; you can redistribute it and/or modify it under the terms of the GNU Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>
<p>This source code is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. Please refer to the GNU Public License for more details.</p>
<p>You should have received a copy of the GNU Public License along with this source code; if not, write to: Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</p>
<hr  />
<p>Error correction demon. (modifications to original errcd see below).</p>
<p>Runs in the background and performs a cascade error correction algorithm on a block of raw keys. Communication with a higher level controller is done via a command pipeline, and communication with the other side is done via packets which are sent and received via pipes in the filesystem. Some parameters (connection locations, destinations) are communicated via command line parameters, others are sent via the command interface. The program is capable to handle several blocks simultaneously, and to connect corresponding messages to the relevant blocks. The final error-corrected key is stored in a file named after the first epoch. If a block processing is requested on one side, it will fix the role to "Alice", and the remote side will be the "bob" which changes the bits accordingly. Definitions according to the flowchart in DSTA deliverable D3</p>
<p>Update 25/6/20: Unfortunately I don't have access to the flowchart, so I'll have to base my definitions off the code itself. I have thus decided to use intuitive names define the roles based on what they do in the system. Universal names can be adopted in the future in referring to these roles.</p>
<p>usage:</p>
<p>errcd -c commandpipe -s sendpipe -r receivepipe -d rawkeydirectory -f finalkeydirectory -l notificationpipe -q responsepipe -Q querypipe [ -e errormargin ] [ -E expectederror ] [ -k ] [ -J basicerror ] [ -T errorbehaviour ] [ -V verbosity ] [ -I ] [ -i ] [ -p ] [ -B BER | -b rounds ]</p>
<p>options/parameters:</p>
<p>DIRECTORY / CONNECTION PARAMETERS:</p>
<p>-c commandpipe: pipe for receiving commands. A command is typically an epoch name and a number of blocks to follow, separated by a whitespace. An optional error argument can be passed as a third parameter. Commands are read via fscanf, and should be terminated with a newline. -s sendpipe: binary connection which reaches to the transfer program. This is for packets to be sent out to the other side. Could be replaced by sockets later. -r receivepipe: same as sendpipe, but for incoming packets. -d rawkeydirectory: directory which contains epoch files for raw keys in stream-3 format -f finalkeydirectory: Directory which contains the final key files. -l notificationpipe: whenever a final key block is processed, its epoch name is written into this pipe or file. The content of the message is determined by the verbosity flag. -Q querypipe: to request the current status of a particular epoch block, requests may be sent into this pipe. Syntax TBD. -q respondpipe: Answers to requests will be written into this pipe or file.</p>
<p>CONTROL OPTIONS:</p>
<p>-e errormargin: A float parameter for how many standard deviations of the detected errors should be added to the information leakage estimation to eve, assuming a poissonian statistics on the found errors (i.e., if 100 error bits are found, one standard deviation in the error rate QBER is QBER /Sqrt(10). ) Default is set to 0. -E initialerr: an initial error rate can be given for choosing the length of the first test. Default is 0.05. This may be overridden by a servoed quantity or by an explicit statement in a command. -k remove_raw_keys_after_use option. If set, the raw key files will be deleted after writing the final key into a file. -J intrinsicerr: Error rate which is assumed to be generated outside the influence of an eavesdropper. -T runtimeerrormode: Determines the way how to react on errors which should not stop the demon. Default is 0. detailed behavior: 0: terminate program on everything 1: ignore errors on wrong packets??? 2: ignore errors inherited from other side -V verbosity_level: Defines verbosity mode on the logging output after a block has been processed. options: 0: just output the raw block name (epoch number in hex) 1: output the block name, number of final bits 2: output block name, num of initial bits, number of final bits, error rate 3: same as 2, but in plain text 4: same as 2, but with explicit number of leaked bits in the error correction procedure 5: same as 4, but with plain text comments -I skip_qber_estimation. If this option is on, the initial error measurement for block optimization is skipped, and the default value or supplied value is chosen. This option should increase the efficiency of the key regeneration if a servo for the error rate is on. -i bellmode (deviceindependent) option. If this option is set, the deamon expects to receive a value for the Bell violation parameter to estimate the knowledge of an eavesdropper. -p disable_privacyamplification option. avoid privacy amplification. For debugging purposes, to find the residual error rate -B biconf_BER: choose the number of BICONF rounds to meet a final bit error probability of BER. This assumes a residual error rate of 10^-4 after the first two rounds. -b biconf_rounds: choose the number of BICONF rounds. Defaults to 10, corresponding to a BER of 10^-7.</p>
<p>History: first specs 17.9.05chk</p>
<p>status 01.4.06 21:37; runs through and leaves no errors in final key. 1.5.06 23:20: removed biconf indexing bugs &amp; leakage errors 2.5.06 10:14 fixed readin problem with word-aligned lengths 3.5.06 19:00 does not hang over 300 calls 28.10.06 fixed sscanf to read in epochs &gt;0x7fffffff 14.07.07 logging leaked bits, verbosity options 4+5 9.-18.10.07 fixed Bell value transmission for other side 24.10.08 fixed error estimation for BB84</p>
<pre class="fragment">   introduce rawbuf variable to clean buffer in keyblock struct (status?)
</pre><p>modified version of errcd to take care of the followig problems:</p><ul>
<li>initial key permutation</li>
<li>more efficient biconf check</li>
<li>allow recursive correction after biconf error discoveries status: seems to work. needs some cleanup, and needs to be tested for longer key lenghts to confirm the BER below 10^-7 with some confidence. (chk 21.7.07)<ul>
<li>inserted error margin option to allow for a few std deviations of the detected error</li>
</ul>
</li>
</ul>
<p>open questions / issues: check assignment of short indices for bit length.... check consistency of processing status get a good RNG source or recycle some bits from the sequence....currently it uses urandom as a seed source. The pseudorandom generator in this program is a Gold sequence and possibly dangerous due to short-length correlations - perhaps something better? should have more consistency tests on packets still very chatty on debug information query/response mechanism not implemented yet </p>

<p class="definition">Definition in file <a class="el" href="ecd2_8h_source.html">ecd2.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="afcf673b3dfbe3832a1908ab68b0a9a43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcf673b3dfbe3832a1908ab68b0a9a43">&#9670;&nbsp;</a></span>create_thread_and_start_qber_using_cmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int create_thread_and_start_qber_using_cmd </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dpnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmd_input</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a thread and start qber based on the cmd stored in cimd_input. </p>
<p>Uses static variable: input_last_index</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dpnt</td><td></td></tr>
    <tr><td class="paramname">cmd_input</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if success otherwise error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="ecd2_8c_source.html#l00225">225</a> of file <a class="el" href="ecd2_8c_source.html">ecd2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                                                                        {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, errcode, sl;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="comment">/* parse command string */</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  dpnt = index(cmd_input, <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordflow">if</span> (dpnt) { <span class="comment">/* we got a newline */</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    dpnt[0] = 0;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    sl = strlen(cmd_input);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    errcode = <a class="code" href="ecd2_8c.html#a80b23b45347d940c2f81a0a7adc77a4b">process_command</a>(cmd_input);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">if</span> (errcode &amp;&amp; (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> == END_ON_ERR)) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(errcode); <span class="comment">/* complain */</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">/* move back rest */</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; input_last_index - sl - 1; <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) cmd_input[<a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = dpnt[<a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1];</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    input_last_index -= sl + 1;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    cmd_input[input_last_index] = <span class="charliteral">&#39;\0&#39;</span>; <span class="comment">/* repair index */</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="acd2e1b2dee36ccbff485d8e70b117170"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd2e1b2dee36ccbff485d8e70b117170">&#9670;&nbsp;</a></span>emsg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int emsg </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print error message based on err code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

<p class="definition">Definition at line <a class="el" href="ecd2_8c_source.html#l00011">11</a> of file <a class="el" href="ecd2_8c_source.html">ecd2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;                   {</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  fprintf(stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, errormessage[code]);</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  <span class="keywordflow">return</span> code;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac2a9111d875db77ed0a97a433177d750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2a9111d875db77ed0a97a433177d750">&#9670;&nbsp;</a></span>has_pipe_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int has_pipe_event </td>
          <td>(</td>
          <td class="paramtype">fd_set *&#160;</td>
          <td class="paramname"><em>readqueue_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fd_set *&#160;</td>
          <td class="paramname"><em>writequeue_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>selectmax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="defaultdefinitions_8h.html#ae7d38601dfbd73adbe5c1b3ec34e0e13">Boolean</a>&#160;</td>
          <td class="paramname"><em>hasContentToSend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>wait for pipe event (with timeout) using select syscall </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">readqueue_ptr</td><td></td></tr>
    <tr><td class="paramname">writequeue_ptr</td><td></td></tr>
    <tr><td class="paramname">selectmax</td><td></td></tr>
    <tr><td class="paramname">hasContentToSend</td><td></td></tr>
    <tr><td class="paramname">timeout</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result from select syscall </dd></dl>

<p class="definition">Definition at line <a class="el" href="ecd2_8c_source.html#l00150">150</a> of file <a class="el" href="ecd2_8c_source.html">ecd2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                                                                                                                   {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">/* prepare select call */</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  FD_ZERO(readqueue_ptr);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  FD_ZERO(writequeue_ptr);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  FD_SET(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3eaf69c035701e4f7512ccf7ccd393057cc">handleId_queryPipe</a>],readqueue_ptr); <span class="comment">/* query pipe */</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  FD_SET(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3eab6c38e60aebca3ab02e49e8cb9e9a055">handleId_receivePipe</a>],readqueue_ptr); <span class="comment">/* receive pipe */</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  FD_SET(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3ea9902f55cc4b636c1f2501e7892ffdf80">handleId_commandPipe</a>],readqueue_ptr); <span class="comment">/* command pipe */</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordflow">if</span> (hasContentToSend) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    FD_SET(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3ea359a6ff399089b29328c9e6dc731c354">handleId_sendPipe</a>], writequeue_ptr); <span class="comment">/* content to send */</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">return</span> select(selectmax, readqueue_ptr, writequeue_ptr, (fd_set *)0, &amp;<a class="code" href="transferd_8h.html#a03a5df464f7f59f8fe9f8da62642ce06">timeout</a>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main code. </p>
<p>Contains the main loop.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td></td></tr>
    <tr><td class="paramname">argv</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

<p class="definition">Definition at line <a class="el" href="ecd2_8c_source.html#l00380">380</a> of file <a class="el" href="ecd2_8c_source.html">ecd2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                                 {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// Variables</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a>, errcode;          <span class="comment">// for checking if error occured in function, or return values in general</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;                        <span class="comment">// Helper iterator value</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// For select syscall system </span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  fd_set <a class="code" href="transferd_8h.html#a2d54a5a0b4aa30f9a0161cd3cc222851">readqueue</a>, <a class="code" href="transferd_8h.html#a9b9675408102f948906bc302287f42d2">writequeue</a>;  <span class="comment">/* for main event loop */</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordtype">int</span> selectmax;                 <span class="comment">/* keeps largest handle for select call */</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keyword">struct </span>timeval <a class="code" href="transferd_8h.html#ad996a74def8417bb467ec4af72f1073b">HALFSECOND</a> = {0, 500000};</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keyword">struct </span>timeval TENMILLISEC = {0, 10000};</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">/* Buffers or pointers for packet receive / send management */</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keyword">struct </span><a class="code" href="structpacket__received.html">packet_received</a> *sbfp = NULL;  <span class="comment">/* index to go through the linked list */</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <a class="code" href="globalvars_8h.html#ad2ccf7edc49e0e4e4d3f6c40df187f9b">next_packet_to_send</a> = NULL; <span class="comment">/* no packets to be sent */</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <a class="code" href="globalvars_8h.html#a533147eb4caa484f9a001a15a2a376d5">last_packet_to_send</a> = NULL;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  send_index = 0;        <span class="comment">/* index of next packet to send */</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  receive_index = 0;     <span class="comment">/* index for reading in a longer packet */</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <a class="code" href="globalvars_8h.html#a7f5d903352c2133a67099abbf29041dc">blocklist</a> = NULL;      <span class="comment">/* no active key blocks in memory */</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  rec_packetlist = NULL; <span class="comment">/* no receive packet s in queue */</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// Variables for command input</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordtype">char</span> cmd_input[<a class="code" href="defaultdefinitions_8h.html#a641524b6c330d204b7aa26d2e57b9c4e">CMD_INBUFLEN</a>];  <span class="comment">/* For temporary storage of cmd input */</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  cmd_input[0] = <span class="charliteral">&#39;\0&#39;</span>;    <span class="comment">/* buffer for commands */</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  input_last_index = 0;   <span class="comment">/* input parsing */</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="comment">// Parameter passing</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  errcode = <a class="code" href="ecd2_8c.html#a533d8ed350c93589b514cc9b2d7ec4e6">parse_options</a>(argc, argv);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">if</span> (errcode) { <span class="keywordflow">return</span> errcode; }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// Opening pipe and file handles</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  errcode = <a class="code" href="ecd2_8c.html#a4569bd79d0575eaa703600d39573728d">open_pipelines</a>();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">if</span> (errcode) { <span class="keywordflow">return</span> errcode; }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// Find largest handle for select call</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  selectmax = 0;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3eabe5df9279ffaaaf0127ed51063932c1e">handleId_numberOfHandles</a>; <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> (selectmax &lt; <a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]) selectmax = <a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  selectmax += 1;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// Main loop</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// Note: I decided to compartmentalize the code to make it more usable for its users (who are mostly not from</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// a programming background). This can translate to a slight dip in performance because of function calls and pointer </span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// usage, but I honestly don&#39;t think it will make a significant impact (if any) on performance, and at this point </span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="comment">// readability is much more important. May want to take this into account at the benchmarking phase of development </span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="comment">// though. Can also make the params global.</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="defaultdefinitions_8h.html#ae7d38601dfbd73adbe5c1b3ec34e0e13a6d32c34708a0a3507c4bdb89219d650b">True</a>) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// Part 1 of the loop: use the select syscall to wait on events from multiple pipes </span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">// -------------------------------------------------------------</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a> = <a class="code" href="ecd2_8c.html#ac2a9111d875db77ed0a97a433177d750">has_pipe_event</a>(&amp;<a class="code" href="transferd_8h.html#a2d54a5a0b4aa30f9a0161cd3cc222851">readqueue</a>, &amp;<a class="code" href="transferd_8h.html#a9b9675408102f948906bc302287f42d2">writequeue</a>, selectmax, </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <a class="code" href="globalvars_8h.html#ad2ccf7edc49e0e4e4d3f6c40df187f9b">next_packet_to_send</a> || send_index, </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        (cmd_input[0] || rec_packetlist) ? TENMILLISEC : <a class="code" href="transferd_8h.html#ad996a74def8417bb467ec4af72f1073b">HALFSECOND</a>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// Part 2 of the loop: if an error happened, retval would be -1</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// -------------------------------------------------------------</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a> == -1) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(28);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">// If retval is not zero, there is something to read / write for the pipes</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a> != 0) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="comment">// If there is something to write into send pipe</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="keywordflow">if</span> (FD_ISSET(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3ea359a6ff399089b29328c9e6dc731c354">handleId_sendPipe</a>], &amp;<a class="code" href="transferd_8h.html#a9b9675408102f948906bc302287f42d2">writequeue</a>)) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        errcode = <a class="code" href="ecd2_8c.html#aa3ad63163e9bd051e3a96cee884d1f9c">write_into_sendpipe</a>(&amp;send_index);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">if</span> (errcode) <span class="keywordflow">return</span> errcode;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      } </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="comment">// If there is something to read from cmd pipeline</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="keywordflow">if</span> (FD_ISSET(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3ea9902f55cc4b636c1f2501e7892ffdf80">handleId_commandPipe</a>], &amp;<a class="code" href="transferd_8h.html#a2d54a5a0b4aa30f9a0161cd3cc222851">readqueue</a>)) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="comment">// Read from cmd pipeline into cmd_input</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        errcode = <a class="code" href="ecd2_8c.html#acc11047ebb7d577c2bef453dcac255b3">read_from_cmdpipe</a>((<span class="keywordtype">char</span> *) &amp;cmd_input);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">if</span> (errcode) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;          <span class="keywordflow">if</span> (errcode == -1) <span class="keywordflow">break</span>; <span class="comment">// Clean exit program</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">return</span> errcode;      <span class="comment">// Otherwise an error really occurred</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="comment">// Process cmd_input</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        errcode = <a class="code" href="ecd2_8c.html#afcf673b3dfbe3832a1908ab68b0a9a43">create_thread_and_start_qber_using_cmd</a>(dpnt, (<span class="keywordtype">char</span> *) &amp;cmd_input);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">if</span> (errcode) <span class="keywordflow">return</span> errcode;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="comment">// If there is something to read from receive pipeline</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">if</span> (FD_ISSET(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3eab6c38e60aebca3ab02e49e8cb9e9a055">handleId_receivePipe</a>], &amp;<a class="code" href="transferd_8h.html#a2d54a5a0b4aa30f9a0161cd3cc222851">readqueue</a>)) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">if</span> (receive_index &lt; <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="struct_e_r_r_c___p_r_o_t_o.html">ERRC_PROTO</a>)) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;          <span class="comment">// Read header (tag &amp; length)</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;          errcode = <a class="code" href="ecd2_8c.html#ab80cb55a1207c201017b8454c3921021">read_header_from_receivepipe</a>();</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;          <span class="comment">// Read body (subtype &amp; data)</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;          errcode = <a class="code" href="ecd2_8c.html#a7002d7463cac95a030c281b2bbc0ec63">read_body_from_receivepipe</a>();</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">if</span> (errcode) <span class="keywordflow">return</span> errcode;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="comment">// If there is something to read from query pipeline (commented out because the body was empty)</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="comment">// if (FD_ISSET(arguments.handle[handleId_queryPipe], &amp;readqueue)) { }</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment">// Part 3 of the loop: processing packets in the rec_packetlist</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="comment">// -------------------------------------------------------------</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment">// If there is something to process</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> ((sbfp = rec_packetlist)) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="comment">// Get pointer to the packet buffer</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      packet_to_process_buf = sbfp-&gt;<a class="code" href="structpacket__received.html#ae314ec09eb8040ccf4dec6d28c57f148">packet</a>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="comment">// If packet is not an error correction packet based on tag, then throw error</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordflow">if</span> (((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)packet_to_process_buf)[0] != <a class="code" href="packets_8h.html#ac4fe1c43e02ab8663f6cd57dfd5c62fb">ERRC_PROTO_tag</a>) { <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(44); }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="comment">// Print debug message</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="preprocessor">      #ifdef DEBUG</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      printf(<span class="stringliteral">&quot;received message, subtype: %d, len: %d\n&quot;</span>, ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)packet_to_process_buf)[2], ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)packet_to_process_buf)[1]);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      fflush(stdout);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="preprocessor">      #endif</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="comment">// Process packet based on the subtype</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="keywordflow">switch</span> (((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)packet_to_process_buf)[2]) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473add392aa99f6aa9e06ae30450aef657c5">SUBTYPE_QBER_ESTIM</a>: <span class="comment">/* received an error estimation packet */</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;          errcode = <a class="code" href="qber__estim_8c.html#acce7cf9a46fcc01f52c4437a165e7a9d">process_esti_message_0</a>(packet_to_process_buf);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;          <span class="keywordflow">if</span> (errcode) { <span class="comment">/* an error occured */</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> == IGNORE_ERRS_ON_OTHER_END) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(errcode);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;          }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473a00300a213c78ee75a8553670a65a08b7">SUBTYPE_QBER_ESTIM_REQ_MORE_SAMPLES</a>: <span class="comment">/* received request for more bits */</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;          errcode = <a class="code" href="qber__estim_8c.html#ae0da977190751f93cb961052cd942fad">send_more_esti_bits</a>(packet_to_process_buf);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;          <span class="keywordflow">if</span> (errcode) { <span class="comment">/* an error occured */</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> == IGNORE_ERRS_ON_OTHER_END) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(errcode);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;          }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473a68c57f200df424fed82c0bd841968518">SUBTYPE_QBER_ESTIM_ACK</a>: <span class="comment">/* reveived error confirmation message */</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;          errcode = <a class="code" href="qber__estim_8c.html#a83321efc5bc5da83948e24467cbfc443">prepare_dualpass</a>(packet_to_process_buf);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;          <span class="keywordflow">if</span> (errcode) { <span class="comment">/* an error occured */</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> == IGNORE_ERRS_ON_OTHER_END) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(errcode);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;          }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473ace9b05f26a9d017da1aa94ab264b3e54">SUBTYPE_CASCADE_PARITY_LIST</a>: <span class="comment">/* reveived parity list message */</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;          errcode = <a class="code" href="cascade__biconf_8c.html#a2717fa084783c56c589b8c2ebf4033b1">start_binarysearch</a>(packet_to_process_buf);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;          <span class="keywordflow">if</span> (errcode) { <span class="comment">/* an error occured */</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> == IGNORE_ERRS_ON_OTHER_END) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(errcode);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;          }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473adb9a11791d800de7b6f4eceac5a87b19">SUBTYPE_CASCADE_BIN_SEARCH_MSG</a>: <span class="comment">/* reveive a binarysearch message */</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;          errcode = <a class="code" href="cascade__biconf_8c.html#a880762f9d0d644e11eb2483c17478a91">process_binarysearch</a>(packet_to_process_buf);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;          <span class="keywordflow">if</span> (errcode) { <span class="comment">/* an error occured */</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> == IGNORE_ERRS_ON_OTHER_END) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(errcode);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;          }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473a0cd36c9364a3e0096ae8fc9864c42256">SUBTYPE_CASCADE_BICONF_INIT_REQ</a>: <span class="comment">/* receive a BICONF initiating request */</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;          errcode = <a class="code" href="cascade__biconf_8c.html#a11ff668df61f51cc3f7e527cef353661">generate_biconfreply</a>(packet_to_process_buf);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;          <span class="keywordflow">if</span> (errcode) { <span class="comment">/* an error occured */</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> == IGNORE_ERRS_ON_OTHER_END) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(errcode);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;          }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473a380292092f2fa7462f2d0ac084d86ab5">SUBTYPE_CASCADE_BICONF_PARITY_RESP</a>: <span class="comment">/* receive a BICONF parity response */</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;          errcode = <a class="code" href="cascade__biconf_8c.html#a42ee597caadd50095e38fd2ee47e6de2">receive_biconfreply</a>(packet_to_process_buf);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;          <span class="keywordflow">if</span> (errcode) { <span class="comment">/* an error occured */</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> == IGNORE_ERRS_ON_OTHER_END) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(errcode);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;          }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473a910eac00d12d4ce4c61172cfe48c0bd0">SUBTYPE_START_PRIV_AMP</a>: <span class="comment">/* receive a privacy amplification start msg */</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;          errcode = <a class="code" href="priv__amp_8c.html#af014f9642f652afb57efba0d1eddd37b">receive_privamp_msg</a>(packet_to_process_buf);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;          <span class="keywordflow">if</span> (errcode) { <span class="comment">/* an error occured */</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> == IGNORE_ERRS_ON_OTHER_END) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(errcode);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;          }</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">default</span>: <span class="comment">/* packet subtype not known */</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;          fprintf(stderr, <span class="stringliteral">&quot;received subtype %d; &quot;</span>, ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)packet_to_process_buf)[2]);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;          <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(45);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="comment">/* printf(&quot;receive packet successfully digested\n&quot;);</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">         fflush(stdout); */</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="comment">// Remove packet from rec_packetlist</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      rec_packetlist = sbfp-&gt;<a class="code" href="structpacket__received.html#ad3821c84e373dee38d7ff84f3876fa7c">next</a>; <span class="comment">/* update packet pointer */</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <a class="code" href="debug_8c.html#ae9cba13dc8aa5d62e13112d01be090ba">free2</a>(packet_to_process_buf);           <span class="comment">/* free data section... */</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <a class="code" href="debug_8c.html#ae9cba13dc8aa5d62e13112d01be090ba">free2</a>(sbfp);                 <span class="comment">/* ...and pointer entry */</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="comment">// close nicely</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  fclose(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#acb34c8b6cb0bb283ab18ae33c2fcee21">fhandle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3ea9902f55cc4b636c1f2501e7892ffdf80">handleId_commandPipe</a>]);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  close(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3ea359a6ff399089b29328c9e6dc731c354">handleId_sendPipe</a>]);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  close(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3eab6c38e60aebca3ab02e49e8cb9e9a055">handleId_receivePipe</a>]);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  fclose(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#acb34c8b6cb0bb283ab18ae33c2fcee21">fhandle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3ea61d4048a034b1debc9e694bcbb6ef95c">handleId_notifyPipe</a>]);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  fclose(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#acb34c8b6cb0bb283ab18ae33c2fcee21">fhandle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3eaf69c035701e4f7512ccf7ccd393057cc">handleId_queryPipe</a>]);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  fclose(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#acb34c8b6cb0bb283ab18ae33c2fcee21">fhandle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3ead4e3e7fcb78a7102c557c39aa1f200a5">handleId_queryRespPipe</a>]);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a533d8ed350c93589b514cc9b2d7ec4e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a533d8ed350c93589b514cc9b2d7ec4e6">&#9670;&nbsp;</a></span>parse_options()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int parse_options </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse arguments on initialization. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>argument count </td></tr>
    <tr><td class="paramname">argv</td><td>arguments from main </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int error code, 0 if success </dd></dl>

<p class="definition">Definition at line <a class="el" href="ecd2_8c_source.html#l00023">23</a> of file <a class="el" href="ecd2_8c_source.html">ecd2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;                                          {</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="transferd_8h.html#a217e4b46670419e6c3665b3c9f96b7da">opt</a>;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <span class="keywordtype">float</span> biconf_BER = 0;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <span class="keywordflow">while</span> ((<a class="code" href="transferd_8h.html#a217e4b46670419e6c3665b3c9f96b7da">opt</a> = getopt(argc, argv, <span class="stringliteral">&quot;c:s:r:d:f:l:q:Q:e:E:kJ:T:V:Ipb:B:i&quot;</span>)) != EOF) {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <span class="comment">/* for pairing filename-containing options */</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="transferd_8h.html#a217e4b46670419e6c3665b3c9f96b7da">opt</a>) {</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;V&#39;</span>: <span class="comment">/* verbosity parameter */</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <span class="keywordflow">if</span> (1 != sscanf(optarg, <span class="stringliteral">&quot;%d&quot;</span>, &amp;<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#ae541e46d81115b150ccff5b388741f9c">verbosity_level</a>)) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(1);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;q&#39;</span>: <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++; <span class="comment">/* respondpipe, idx=7 */</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;Q&#39;</span>: <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++; <span class="comment">/* querypipe, idx=6 */</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>: <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++; <span class="comment">/* notify pipe, idx=5 */</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>: <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++; <span class="comment">/* finalkeydir, idx=4 */</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>: <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++; <span class="comment">/* rawkeydir, idx=3 */</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>: <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++; <span class="comment">/* commreceivepipe, idx=2 */</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>: <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++; <span class="comment">/* commsendpipe, idx=1 */</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:      <span class="comment">/* commandpipe, idx=0 */</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <span class="keywordflow">if</span> (1 != sscanf(optarg, <a class="code" href="defaultdefinitions_8h.html#a4f33114b553b628e239aec2724cde8cf">FNAMFORMAT</a>, <a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#ab9da3bd5390d5527981684a1d5064e44">fname</a>[<a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>])) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(2 + <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#ab9da3bd5390d5527981684a1d5064e44">fname</a>[<a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>][<a class="code" href="defaultdefinitions_8h.html#ade60ede0376eec193b38f3f28cb62c5e">FNAMELENGTH</a> - 1] = 0; <span class="comment">/* security termination */</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span>: <span class="comment">/* read in error threshold */</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="keywordflow">if</span> (1 != sscanf(optarg, <span class="stringliteral">&quot;%f&quot;</span>, &amp;<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#aeb38845130b2c911c9a3d61a550c89ed">errormargin</a>)) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(10);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#aeb38845130b2c911c9a3d61a550c89ed">errormargin</a> &lt; <a class="code" href="defaultdefinitions_8h.html#a4f5ccce5f92b3b188ac0fa110c47eb2d">MIN_ERR_MARGIN</a>) || (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#aeb38845130b2c911c9a3d61a550c89ed">errormargin</a> &gt; <a class="code" href="defaultdefinitions_8h.html#a948dac9319990b61eba637ea0df78176">MAX_ERR_MARGIN</a>))</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;          <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(11);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;E&#39;</span>: <span class="comment">/* expected error rate */</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">if</span> (1 != sscanf(optarg, <span class="stringliteral">&quot;%f&quot;</span>, &amp;<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#ae6c6810b046333fb7f8441f0320c60e8">initialerr</a>)) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(12);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#ae6c6810b046333fb7f8441f0320c60e8">initialerr</a> &lt; <a class="code" href="defaultdefinitions_8h.html#a3f3192b59954406225891ead671764ec">MIN_INI_ERR</a>) || (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#ae6c6810b046333fb7f8441f0320c60e8">initialerr</a> &gt; <a class="code" href="defaultdefinitions_8h.html#a74d8d9c4048eafb7f5406f32ebbe4fad">MAX_INI_ERR</a>))</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;          <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(13);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;k&#39;</span>: <a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a6afa0ce773c34b814148815675df9a6b">remove_raw_keys_after_use</a> = 1; <span class="comment">/* kill mode for raw files */</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;J&#39;</span>: <span class="comment">/* error rate generated outside eavesdropper */</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keywordflow">if</span> (1 != sscanf(optarg, <span class="stringliteral">&quot;%f&quot;</span>, &amp;<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a0f97538134f3dbe06bdc5b0b1a4fee66">intrinsicerr</a>)) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(14);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a0f97538134f3dbe06bdc5b0b1a4fee66">intrinsicerr</a> &lt; 0) || (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a0f97538134f3dbe06bdc5b0b1a4fee66">intrinsicerr</a> &gt; <a class="code" href="defaultdefinitions_8h.html#a4b88e1eaa0cd37a9a2e207e345146669">MAX_INTRINSIC</a>))</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;          <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(15);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;T&#39;</span>: <span class="comment">/* runtime error behaviour */</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordflow">if</span> (1 != sscanf(optarg, <span class="stringliteral">&quot;%d&quot;</span>, &amp;<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a>)) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(16);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> &lt; 0) || (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> &gt; <a class="code" href="defaultdefinitions_8h.html#ae728dda749d80a0faba6d076d2c5efcb">MAXRUNTIMEERROR</a>))</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;          <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(16);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;I&#39;</span>: <a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#ae86a9d076ca954b1f0800c2a18338727">skip_qber_estimation</a> = 1; <span class="comment">/* skip initial error measurement */</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>: <a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af78000c59f253e0d7c3ca2f9fb3075c8">bellmode</a> = 1; <span class="comment">/* expect a bell value for sneakage estimation */</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>: <a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a711839aa2b1afa834c68af6b96ef04d5">disable_privacyamplification</a> = 1; <span class="comment">/* disable privacy amplification */</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>: <span class="comment">/* set BICONF rounds */</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">if</span> (1 != sscanf(optarg, <span class="stringliteral">&quot;%d&quot;</span>, &amp;<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a53a2a52420c14917ea4eaf982f4c2141">biconf_rounds</a>)) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(76);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a53a2a52420c14917ea4eaf982f4c2141">biconf_rounds</a> &lt;= 0) || (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a53a2a52420c14917ea4eaf982f4c2141">biconf_rounds</a> &gt; <a class="code" href="defaultdefinitions_8h.html#a9d44da3acc0519f827e8fc5c67754ac0">MAX_BICONF_ROUNDS</a>))</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;          <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(77);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;B&#39;</span>: <span class="comment">/* take BER argument to determine biconf rounds */</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">if</span> (1 != sscanf(optarg, <span class="stringliteral">&quot;%f&quot;</span>, &amp;biconf_BER)) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(78);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordflow">if</span> ((biconf_BER &lt;= 0) || (biconf_BER &gt; 1)) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(79);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a53a2a52420c14917ea4eaf982f4c2141">biconf_rounds</a> = (int)(-log(biconf_BER / <a class="code" href="defaultdefinitions_8h.html#a8a9b4ad5680d8c98f36fbddcfea13eaa">AVG_BINSEARCH_ERR</a>) / log(2));</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a53a2a52420c14917ea4eaf982f4c2141">biconf_rounds</a> &lt;= 0) <a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a53a2a52420c14917ea4eaf982f4c2141">biconf_rounds</a> = 1; <span class="comment">/* at least one */</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a53a2a52420c14917ea4eaf982f4c2141">biconf_rounds</a> &gt; <a class="code" href="defaultdefinitions_8h.html#a9d44da3acc0519f827e8fc5c67754ac0">MAX_BICONF_ROUNDS</a>) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(77);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        printf(<span class="stringliteral">&quot;biconf rounds used: %d\n&quot;</span>, <a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a53a2a52420c14917ea4eaf982f4c2141">biconf_rounds</a>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">/* checking parameter cosistency */</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#ab9da3bd5390d5527981684a1d5064e44">fname</a>[<a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>][0] == 0)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(17); <span class="comment">/* all files and pipes specified ? */</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a512509fe92d58e86e974fa3944b2e93c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a512509fe92d58e86e974fa3944b2e93c">&#9670;&nbsp;</a></span>process_command()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int process_command </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmd_input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>process an input string, terminated with 0, from the command pipe </p>
<p>When you process a command, you spawn a new thread and also begin the QBER estimation process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd_input</td><td>buffer for command </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if success, otherwise return error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="ecd2_8c_source.html#l00253">253</a> of file <a class="el" href="ecd2_8c_source.html">ecd2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                                     {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordtype">int</span> fieldsAssigned, errcode;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> newepoch; <span class="comment">/* command parser */</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordtype">int</span> newepochnumber;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordtype">float</span> newesterror = 0; <span class="comment">/* for initial parsing of a block */</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordtype">float</span> BellValue;       <span class="comment">/* for Ekert-type protocols */</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  fieldsAssigned = sscanf(cmd_input, <span class="stringliteral">&quot;%x %i %f %f&quot;</span>, &amp;newepoch, &amp;newepochnumber, &amp;newesterror, &amp;BellValue);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  printf(<span class="stringliteral">&quot;got cmd: epoch: %08x, num: %d, esterr: %f fieldsAssigned: %d\n&quot;</span>, newepoch, newepochnumber, newesterror, fieldsAssigned);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">  #ifdef DEBUG</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  fflush(stdout);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="preprocessor">  #endif</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">// Assign default values based on how many fields assigned</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">switch</span> (fieldsAssigned) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">case</span> 0:                                     <span class="comment">/* no conversion */</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> != END_ON_ERR) <span class="keywordflow">break</span>;<span class="comment">/* nocomplain */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(30);                         <span class="comment">/* not enough arguments */</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">case</span> 1: newepochnumber = 1;                 <span class="comment">/* use default epoch number */</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">case</span> 2: newesterror = <a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#ae6c6810b046333fb7f8441f0320c60e8">initialerr</a>; <span class="comment">// use default initial error rate, or error rate passed in</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">case</span> 3: BellValue = <a class="code" href="defaultdefinitions_8h.html#a6c0486d0de2df4486a24c2c2d6837f4f">PERFECT_BELL</a>;           <span class="comment">/* assume perfect Bell */</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">case</span> 4:                                     <span class="comment">/* everything is there */</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="comment">// Parameter validation</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keywordflow">if</span> (newesterror &lt; 0 || newesterror &gt; <a class="code" href="defaultdefinitions_8h.html#a74d8d9c4048eafb7f5406f32ebbe4fad">MAX_INI_ERR</a>) { <span class="comment">// error rate out of bounds</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> != END_ON_ERR) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(31);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (newepochnumber &lt; 1) { <span class="comment">// epoch num out of bounds</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> != END_ON_ERR) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(32);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="thread__mgmt_8c.html#ae85a944ce8e93c3604cef0771bb4cf1d">check_epochoverlap</a>(newepoch, newepochnumber)) { <span class="comment">// ensure start epoch &amp; epoch num has not been used</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> != END_ON_ERR) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(33);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="comment">/* create new thread */</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">if</span> ((errcode = <a class="code" href="thread__mgmt_8c.html#aedac9d351103f728998a59403338a03d">create_thread</a>(newepoch, newepochnumber, newesterror, BellValue))) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> != END_ON_ERR) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">return</span> errcode; <span class="comment">/* error reading files */</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <span class="comment">/* Initiate first step of error estimation */</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keywordflow">if</span> ((errcode = <a class="code" href="qber__estim_8c.html#aac721bd8e63ef2f563d58d393e9d4f6d">errorest_1</a>(newepoch))) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">runtimeerrormode</a> != END_ON_ERR) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">return</span> errcode; <span class="comment">/* error initiating err est */</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      printf(<span class="stringliteral">&quot;got a thread and will send msg1\n&quot;</span>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="preprocessor">      #ifdef DEBUG</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      fflush(stdout);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="preprocessor">      #endif</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7002d7463cac95a030c281b2bbc0ec63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7002d7463cac95a030c281b2bbc0ec63">&#9670;&nbsp;</a></span>read_body_from_receivepipe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_body_from_receivepipe </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read message body into buffer pointed by readbuf </p>
<p>Uses static variables: msgprotobuf, receive_index, readbuf</p>
<dl class="section return"><dt>Returns</dt><dd>0 if success, otherwise error message </dd></dl>

<p class="definition">Definition at line <a class="el" href="ecd2_8c_source.html#l00340">340</a> of file <a class="el" href="ecd2_8c_source.html">ecd2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                                 {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="preprocessor">  #ifdef DEBUG</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  printf(<span class="stringliteral">&quot;Read body from rcv pipe\n&quot;</span>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  fflush(stdout);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="preprocessor">  #endif</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a> = read(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3eab6c38e60aebca3ab02e49e8cb9e9a055">handleId_receivePipe</a>], &amp;readbuf[receive_index],</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      msgprotobuf.bytelength - receive_index);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a> == -1) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(36); <span class="comment">/* can that be better? */</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  receive_index += <a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">if</span> (receive_index == msgprotobuf.bytelength) { <span class="comment">/* got all */</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keyword">struct </span><a class="code" href="structpacket__received.html">packet_received</a> *msgp = (<span class="keyword">struct </span><a class="code" href="structpacket__received.html">packet_received</a> *)<a class="code" href="debug_8c.html#af8c2db3d81151416ecd3dcb6f38e3711">malloc2</a>(</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structpacket__received.html">packet_received</a>));</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> (!msgp) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(38);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">/* insert message in message chain */</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    msgp-&gt;<a class="code" href="structpacket__received.html#ad3821c84e373dee38d7ff84f3876fa7c">next</a> = NULL;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    msgp-&gt;<a class="code" href="structpacket__received.html#a8131ca2174b6e6ec87350ed4e2280616">length</a> = receive_index;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    msgp-&gt;<a class="code" href="structpacket__received.html#ae314ec09eb8040ccf4dec6d28c57f148">packet</a> = readbuf;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keyword">struct </span><a class="code" href="structpacket__received.html">packet_received</a> *sbfp = rec_packetlist;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (sbfp) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">while</span> (sbfp-&gt;<a class="code" href="structpacket__received.html#ad3821c84e373dee38d7ff84f3876fa7c">next</a>) sbfp = sbfp-&gt;<a class="code" href="structpacket__received.html#ad3821c84e373dee38d7ff84f3876fa7c">next</a>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      sbfp-&gt;<a class="code" href="structpacket__received.html#ad3821c84e373dee38d7ff84f3876fa7c">next</a> = msgp;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      rec_packetlist = msgp;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    receive_index = 0; <span class="comment">/* ready for next one */</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="acc11047ebb7d577c2bef453dcac255b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc11047ebb7d577c2bef453dcac255b3">&#9670;&nbsp;</a></span>read_from_cmdpipe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_from_cmdpipe </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmd_input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read command from cmdpipe into cmd_input </p>
<p>Uses static variable: input_last_index</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd_input</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 if clean exit requested (empty cmd sent), 0 if success, otherwise error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="ecd2_8c_source.html#l00201">201</a> of file <a class="el" href="ecd2_8c_source.html">ecd2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                       {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a> = read(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3ea9902f55cc4b636c1f2501e7892ffdf80">handleId_commandPipe</a>], &amp;cmd_input[input_last_index], </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <a class="code" href="defaultdefinitions_8h.html#a641524b6c330d204b7aa26d2e57b9c4e">CMD_INBUFLEN</a> - 1 - input_last_index);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a> &lt; 0) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">  #ifdef DEBUG</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  printf(<span class="stringliteral">&quot;Read something from cmd pipe\n&quot;</span>);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  fflush(stdout);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="preprocessor">  #endif</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  input_last_index += <a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  cmd_input[input_last_index] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">if</span> (input_last_index &gt;= <a class="code" href="defaultdefinitions_8h.html#a641524b6c330d204b7aa26d2e57b9c4e">CMD_INBUFLEN</a>) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(75); <span class="comment">/* overflow, parse later... */</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab80cb55a1207c201017b8454c3921021"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab80cb55a1207c201017b8454c3921021">&#9670;&nbsp;</a></span>read_header_from_receivepipe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_header_from_receivepipe </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read header from receivepipe into msgprotobuf, then malloc a buffer and point to it with readbuf </p>
<p>Uses static variables: msgprotobuf, receive_index, readbuf</p>
<dl class="section return"><dt>Returns</dt><dd>0 if success, otherwise error message </dd></dl>

<p class="definition">Definition at line <a class="el" href="ecd2_8c_source.html#l00313">313</a> of file <a class="el" href="ecd2_8c_source.html">ecd2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                                   {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="preprocessor">  #ifdef DEBUG</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  printf(<span class="stringliteral">&quot;Read header from rcv pipe\n&quot;</span>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  fflush(stdout);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor">  #endif</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a> = read(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3eab6c38e60aebca3ab02e49e8cb9e9a055">handleId_receivePipe</a>], &amp;((<span class="keywordtype">char</span> *)&amp;msgprotobuf)[receive_index],</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keyword">sizeof</span>(msgprotobuf) - receive_index);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a> == -1) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(36); <span class="comment">/* can that be better? */</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  receive_index += <a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordflow">if</span> (receive_index == <span class="keyword">sizeof</span>(msgprotobuf)) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">/* prepare for new buffer */</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    readbuf = (<span class="keywordtype">char</span> *)<a class="code" href="debug_8c.html#af8c2db3d81151416ecd3dcb6f38e3711">malloc2</a>(msgprotobuf.bytelength);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">if</span> (!readbuf) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(37);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">/* transfer header */</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    memcpy(readbuf, &amp;msgprotobuf, <span class="keyword">sizeof</span>(msgprotobuf));</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3ad63163e9bd051e3a96cee884d1f9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3ad63163e9bd051e3a96cee884d1f9c">&#9670;&nbsp;</a></span>write_into_sendpipe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int write_into_sendpipe </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>write data from next_packet_to_send into sendpipe </p>
<p>Uses static variable send_index</p>
<dl class="section return"><dt>Returns</dt><dd>0 if success, otherwise error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="ecd2_8c_source.html#l00170">170</a> of file <a class="el" href="ecd2_8c_source.html">ecd2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                          {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">  #ifdef DEBUG</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  printf(<span class="stringliteral">&quot;Writing packet to sendpipe\n&quot;</span>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  fflush(stdout);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">  #endif</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="globalvars_8h.html#ad2ccf7edc49e0e4e4d3f6c40df187f9b">next_packet_to_send</a>-&gt;<a class="code" href="structpacket__to__send.html#ad0befdf18a26825a57674a4f59986ca2">length</a> - send_index;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a> = write(<a class="code" href="structarguments.html">arguments</a>.<a class="code" href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">handle</a>[<a class="code" href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3ea359a6ff399089b29328c9e6dc731c354">handleId_sendPipe</a>], &amp;<a class="code" href="globalvars_8h.html#ad2ccf7edc49e0e4e4d3f6c40df187f9b">next_packet_to_send</a>-&gt;<a class="code" href="structpacket__to__send.html#a595a74e76d5e95ccc3a6360fe37f43ec">packet</a>[send_index], <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a> == -1) <span class="keywordflow">return</span> -<a class="code" href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a>(29);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a> == <a class="code" href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) { <span class="comment">/* packet is sent */</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="debug_8c.html#ae9cba13dc8aa5d62e13112d01be090ba">free2</a>(<a class="code" href="globalvars_8h.html#ad2ccf7edc49e0e4e4d3f6c40df187f9b">next_packet_to_send</a>-&gt;<a class="code" href="structpacket__to__send.html#a595a74e76d5e95ccc3a6360fe37f43ec">packet</a>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keyword">struct </span><a class="code" href="structpacket__to__send.html">packet_to_send</a> *tmp_packetpointer = <a class="code" href="globalvars_8h.html#ad2ccf7edc49e0e4e4d3f6c40df187f9b">next_packet_to_send</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="globalvars_8h.html#ad2ccf7edc49e0e4e4d3f6c40df187f9b">next_packet_to_send</a> = <a class="code" href="globalvars_8h.html#ad2ccf7edc49e0e4e4d3f6c40df187f9b">next_packet_to_send</a>-&gt;<a class="code" href="structpacket__to__send.html#a3a11edfcaec956d36622c5131abdf239">next</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="globalvars_8h.html#a533147eb4caa484f9a001a15a2a376d5">last_packet_to_send</a> == tmp_packetpointer)</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <a class="code" href="globalvars_8h.html#a533147eb4caa484f9a001a15a2a376d5">last_packet_to_send</a> = NULL;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="debug_8c.html#ae9cba13dc8aa5d62e13112d01be090ba">free2</a>(tmp_packetpointer); <span class="comment">/* remove packet pointer */</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    send_index = 0;           <span class="comment">/* not digesting packet anymore */</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    send_index += <a class="code" href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ada59c388a54132792188bb23541d03c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada59c388a54132792188bb23541d03c1">&#9670;&nbsp;</a></span>arguments</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="globalvars_8h.html#ae3d8c060c4264f2c158c036a09f988aa">Arguments</a> <a class="el" href="structarguments.html">arguments</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    <a class="code" href="defaultdefinitions_8h.html#a20610841bdaddedcf51131de8f973ed9">DEFAULT_VERBOSITY</a>,          </div>
<div class="line">    <a class="code" href="defaultdefinitions_8h.html#ad53a417c047d3d5cee5401496f5e06ca">DEFAULT_RUNTIMEERRORMODE</a>,   </div>
<div class="line">    <a class="code" href="defaultdefinitions_8h.html#a94c768f8a25f442a8e10e5cdd446eb58">DEFAULT_BICONF_ROUNDS</a>,      </div>
<div class="line">    <a class="code" href="defaultdefinitions_8h.html#a6a5a750b1c467bf24f5f922a5339b4e3">DEFAULT_ERR_MARGIN</a>,         </div>
<div class="line">    <a class="code" href="defaultdefinitions_8h.html#a434ff7ba8a95fc500000c6b94677aee2">DEFAULT_INITIAL_ERR</a>,        </div>
<div class="line">    <a class="code" href="defaultdefinitions_8h.html#a22c6fd5038baa093a7028d80fc2f55df">DEFAULT_INTRINSIC</a>,          </div>
<div class="line">    <a class="code" href="defaultdefinitions_8h.html#a98e046db9316871de564e6a4b966775c">DEFAULT_KILLMODE</a>,           </div>
<div class="line">    <a class="code" href="defaultdefinitions_8h.html#a6d9f01958be014ec79c7618bb7b14ffd">DEFAULT_ERR_SKIPMODE</a>,       </div>
<div class="line">    <a class="code" href="defaultdefinitions_8h.html#ae7d38601dfbd73adbe5c1b3ec34e0e13af9d46b7804d93a4fcde88489a1b68c24">False</a>,                      </div>
<div class="line">    <a class="code" href="defaultdefinitions_8h.html#ae7d38601dfbd73adbe5c1b3ec34e0e13af9d46b7804d93a4fcde88489a1b68c24">False</a>                       </div>
<div class="line">                                </div>
<div class="line">                                </div>
<div class="line">                                </div>
<div class="line">}</div>
</div><!-- fragment -->
<p>contains arguments read in when initializing program </p>

<p class="definition">Definition at line <a class="el" href="ecd2_8h_source.html#l00213">213</a> of file <a class="el" href="ecd2_8h_source.html">ecd2.h</a>.</p>

</div>
</div>
<a id="a7f5d903352c2133a67099abbf29041dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f5d903352c2133a67099abbf29041dc">&#9670;&nbsp;</a></span>blocklist</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structblockpointer.html">blockpointer</a>* blocklist = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ecd2_8h_source.html#l00208">208</a> of file <a class="el" href="ecd2_8h_source.html">ecd2.h</a>.</p>

</div>
</div>
<a id="a533147eb4caa484f9a001a15a2a376d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a533147eb4caa484f9a001a15a2a376d5">&#9670;&nbsp;</a></span>last_packet_to_send</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structpacket__to__send.html">packet_to_send</a>* last_packet_to_send = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ecd2_8h_source.html#l00210">210</a> of file <a class="el" href="ecd2_8h_source.html">ecd2.h</a>.</p>

</div>
</div>
<a id="ad2ccf7edc49e0e4e4d3f6c40df187f9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2ccf7edc49e0e4e4d3f6c40df187f9b">&#9670;&nbsp;</a></span>next_packet_to_send</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structpacket__to__send.html">packet_to_send</a>* next_packet_to_send = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ecd2_8h_source.html#l00209">209</a> of file <a class="el" href="ecd2_8h_source.html">ecd2.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="adefaultdefinitions_8h_html_ade60ede0376eec193b38f3f28cb62c5e"><div class="ttname"><a href="defaultdefinitions_8h.html#ade60ede0376eec193b38f3f28cb62c5e">FNAMELENGTH</a></div><div class="ttdeci">#define FNAMELENGTH</div><div class="ttdoc">length of file name buffers</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00036">defaultdefinitions.h:35</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a4f33114b553b628e239aec2724cde8cf"><div class="ttname"><a href="defaultdefinitions_8h.html#a4f33114b553b628e239aec2724cde8cf">FNAMFORMAT</a></div><div class="ttdeci">#define FNAMFORMAT</div><div class="ttdoc">for sscanf of filenames</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00037">defaultdefinitions.h:36</a></div></div>
<div class="ttc" id="apackets_8h_html_aa9c8552878a1ed9945cbf0edef5e0473a00300a213c78ee75a8553670a65a08b7"><div class="ttname"><a href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473a00300a213c78ee75a8553670a65a08b7">SUBTYPE_QBER_ESTIM_REQ_MORE_SAMPLES</a></div><div class="ttdeci">@ SUBTYPE_QBER_ESTIM_REQ_MORE_SAMPLES</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00044">packets.h:44</a></div></div>
<div class="ttc" id="aecd2_8c_html_a80b23b45347d940c2f81a0a7adc77a4b"><div class="ttname"><a href="ecd2_8c.html#a80b23b45347d940c2f81a0a7adc77a4b">process_command</a></div><div class="ttdeci">int process_command(char *cmd_input)</div><div class="ttdoc">process an input string, terminated with 0, from the command pipe</div><div class="ttdef"><b>Definition:</b> <a href="ecd2_8c_source.html#l00253">ecd2.c:253</a></div></div>
<div class="ttc" id="aecd2_8c_html_ac2a9111d875db77ed0a97a433177d750"><div class="ttname"><a href="ecd2_8c.html#ac2a9111d875db77ed0a97a433177d750">has_pipe_event</a></div><div class="ttdeci">int has_pipe_event(fd_set *readqueue_ptr, fd_set *writequeue_ptr, int selectmax, Boolean hasContentToSend, struct timeval timeout)</div><div class="ttdoc">wait for pipe event (with timeout) using select syscall</div><div class="ttdef"><b>Definition:</b> <a href="ecd2_8c_source.html#l00150">ecd2.c:150</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a22c6fd5038baa093a7028d80fc2f55df"><div class="ttname"><a href="defaultdefinitions_8h.html#a22c6fd5038baa093a7028d80fc2f55df">DEFAULT_INTRINSIC</a></div><div class="ttdeci">#define DEFAULT_INTRINSIC</div><div class="ttdoc">all errors are due to eve</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00048">defaultdefinitions.h:47</a></div></div>
<div class="ttc" id="adebug_8c_html_ae9cba13dc8aa5d62e13112d01be090ba"><div class="ttname"><a href="debug_8c.html#ae9cba13dc8aa5d62e13112d01be090ba">free2</a></div><div class="ttdeci">void free2(void *p)</div><div class="ttdoc">free wrapper for debugging purposes</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00029">debug.c:29</a></div></div>
<div class="ttc" id="aecd2_8c_html_a4569bd79d0575eaa703600d39573728d"><div class="ttname"><a href="ecd2_8c.html#a4569bd79d0575eaa703600d39573728d">open_pipelines</a></div><div class="ttdeci">int open_pipelines()</div><div class="ttdoc">Open file pipelines.</div><div class="ttdef"><b>Definition:</b> <a href="ecd2_8c_source.html#l00100">ecd2.c:100</a></div></div>
<div class="ttc" id="astructarguments_html"><div class="ttname"><a href="structarguments.html">arguments</a></div><div class="ttdoc">Arguments struct to be parsed in.</div><div class="ttdef"><b>Definition:</b> <a href="globalvars_8h_source.html#l00054">globalvars.h:54</a></div></div>
<div class="ttc" id="aqber__estim_8c_html_ae0da977190751f93cb961052cd942fad"><div class="ttname"><a href="qber__estim_8c.html#ae0da977190751f93cb961052cd942fad">send_more_esti_bits</a></div><div class="ttdeci">int send_more_esti_bits(char *receivebuf)</div><div class="ttdoc">function to reply to a request for more estimation bits.</div><div class="ttdef"><b>Definition:</b> <a href="qber__estim_8c_source.html#l00272">qber_estim.c:272</a></div></div>
<div class="ttc" id="athread__mgmt_8c_html_ae85a944ce8e93c3604cef0771bb4cf1d"><div class="ttname"><a href="thread__mgmt_8c.html#ae85a944ce8e93c3604cef0771bb4cf1d">check_epochoverlap</a></div><div class="ttdeci">int check_epochoverlap(unsigned int epoch, int num)</div><div class="ttdoc">code to check if a requested bunch of epochs already exists in the thread list.</div><div class="ttdef"><b>Definition:</b> <a href="thread__mgmt_8c_source.html#l00013">thread_mgmt.c:13</a></div></div>
<div class="ttc" id="aqber__estim_8c_html_acce7cf9a46fcc01f52c4437a165e7a9d"><div class="ttname"><a href="qber__estim_8c.html#acce7cf9a46fcc01f52c4437a165e7a9d">process_esti_message_0</a></div><div class="ttdeci">int process_esti_message_0(char *receivebuf)</div><div class="ttdoc">function to process the first error estimation packet.</div><div class="ttdef"><b>Definition:</b> <a href="qber__estim_8c_source.html#l00099">qber_estim.c:99</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a20610841bdaddedcf51131de8f973ed9"><div class="ttname"><a href="defaultdefinitions_8h.html#a20610841bdaddedcf51131de8f973ed9">DEFAULT_VERBOSITY</a></div><div class="ttdeci">#define DEFAULT_VERBOSITY</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00059">defaultdefinitions.h:58</a></div></div>
<div class="ttc" id="aqber__estim_8c_html_a83321efc5bc5da83948e24467cbfc443"><div class="ttname"><a href="qber__estim_8c.html#a83321efc5bc5da83948e24467cbfc443">prepare_dualpass</a></div><div class="ttdeci">int prepare_dualpass(char *receivebuf)</div><div class="ttdoc">function to proceed with the error estimation reply.</div><div class="ttdef"><b>Definition:</b> <a href="qber__estim_8c_source.html#l00313">qber_estim.c:313</a></div></div>
<div class="ttc" id="atransferd_8h_html_a03a5df464f7f59f8fe9f8da62642ce06"><div class="ttname"><a href="transferd_8h.html#a03a5df464f7f59f8fe9f8da62642ce06">timeout</a></div><div class="ttdeci">struct timeval timeout</div><div class="ttdef"><b>Definition:</b> <a href="transferd_8h_source.html#l00343">transferd.h:344</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_ae7d38601dfbd73adbe5c1b3ec34e0e13a6d32c34708a0a3507c4bdb89219d650b"><div class="ttname"><a href="defaultdefinitions_8h.html#ae7d38601dfbd73adbe5c1b3ec34e0e13a6d32c34708a0a3507c4bdb89219d650b">True</a></div><div class="ttdeci">@ True</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00068">defaultdefinitions.h:68</a></div></div>
<div class="ttc" id="astructarguments_html_ab9da3bd5390d5527981684a1d5064e44"><div class="ttname"><a href="structarguments.html#ab9da3bd5390d5527981684a1d5064e44">arguments::fname</a></div><div class="ttdeci">char fname[handleId_numberOfHandles][FNAMELENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="globalvars_8h_source.html#l00085">globalvars.h:85</a></div></div>
<div class="ttc" id="atransferd_8h_html_a2d54a5a0b4aa30f9a0161cd3cc222851"><div class="ttname"><a href="transferd_8h.html#a2d54a5a0b4aa30f9a0161cd3cc222851">readqueue</a></div><div class="ttdeci">fd_set readqueue</div><div class="ttdef"><b>Definition:</b> <a href="transferd_8h_source.html#l00343">transferd.h:343</a></div></div>
<div class="ttc" id="atransferd_8h_html_a9b9675408102f948906bc302287f42d2"><div class="ttname"><a href="transferd_8h.html#a9b9675408102f948906bc302287f42d2">writequeue</a></div><div class="ttdeci">fd_set writequeue</div><div class="ttdef"><b>Definition:</b> <a href="transferd_8h_source.html#l00343">transferd.h:343</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a6d9f01958be014ec79c7618bb7b14ffd"><div class="ttname"><a href="defaultdefinitions_8h.html#a6d9f01958be014ec79c7618bb7b14ffd">DEFAULT_ERR_SKIPMODE</a></div><div class="ttdeci">#define DEFAULT_ERR_SKIPMODE</div><div class="ttdoc">initial error estimation is done</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00064">defaultdefinitions.h:63</a></div></div>
<div class="ttc" id="aqber__estim_8c_html_aac721bd8e63ef2f563d58d393e9d4f6d"><div class="ttname"><a href="qber__estim_8c.html#aac721bd8e63ef2f563d58d393e9d4f6d">errorest_1</a></div><div class="ttdeci">int errorest_1(unsigned int epoch)</div><div class="ttdoc">function to initiate the error estimation procedure.</div><div class="ttdef"><b>Definition:</b> <a href="qber__estim_8c_source.html#l00050">qber_estim.c:50</a></div></div>
<div class="ttc" id="acascade__biconf_8c_html_a42ee597caadd50095e38fd2ee47e6de2"><div class="ttname"><a href="cascade__biconf_8c.html#a42ee597caadd50095e38fd2ee47e6de2">receive_biconfreply</a></div><div class="ttdeci">int receive_biconfreply(char *receivebuf)</div><div class="ttdoc">Start the parity generation process on bob's side.</div><div class="ttdef"><b>Definition:</b> <a href="cascade__biconf_8c_source.html#l00862">cascade_biconf.c:862</a></div></div>
<div class="ttc" id="athread__mgmt_8c_html_aedac9d351103f728998a59403338a03d"><div class="ttname"><a href="thread__mgmt_8c.html#aedac9d351103f728998a59403338a03d">create_thread</a></div><div class="ttdeci">int create_thread(unsigned int epoch, int num, float inierr, float BellValue)</div><div class="ttdoc">code to prepare a new thread from a series of raw key files.</div><div class="ttdef"><b>Definition:</b> <a href="thread__mgmt_8c_source.html#l00040">thread_mgmt.c:40</a></div></div>
<div class="ttc" id="astructpacket__to__send_html_a595a74e76d5e95ccc3a6360fe37f43ec"><div class="ttname"><a href="structpacket__to__send.html#a595a74e76d5e95ccc3a6360fe37f43ec">packet_to_send::packet</a></div><div class="ttdeci">char * packet</div><div class="ttdoc">pointer to content</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00218">packets.h:218</a></div></div>
<div class="ttc" id="astructarguments_html_aeb38845130b2c911c9a3d61a550c89ed"><div class="ttname"><a href="structarguments.html#aeb38845130b2c911c9a3d61a550c89ed">arguments::errormargin</a></div><div class="ttdeci">float errormargin</div><div class="ttdoc">number of standard deviations of the detected errors should be added to eve's information leakage est...</div><div class="ttdef"><b>Definition:</b> <a href="globalvars_8h_source.html#l00070">globalvars.h:70</a></div></div>
<div class="ttc" id="ahelpers_8h_html_a60dccdec5aced9500d5f728bce5b9b3eaf69c035701e4f7512ccf7ccd393057cc"><div class="ttname"><a href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3eaf69c035701e4f7512ccf7ccd393057cc">handleId_queryPipe</a></div><div class="ttdeci">@ handleId_queryPipe</div><div class="ttdef"><b>Definition:</b> <a href="helpers_8h_source.html#l00063">helpers.h:63</a></div></div>
<div class="ttc" id="apackets_8h_html_ac4fe1c43e02ab8663f6cd57dfd5c62fb"><div class="ttname"><a href="packets_8h.html#ac4fe1c43e02ab8663f6cd57dfd5c62fb">ERRC_PROTO_tag</a></div><div class="ttdeci">#define ERRC_PROTO_tag</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00064">packets.h:63</a></div></div>
<div class="ttc" id="acascade__biconf_8c_html_a2717fa084783c56c589b8c2ebf4033b1"><div class="ttname"><a href="cascade__biconf_8c.html#a2717fa084783c56c589b8c2ebf4033b1">start_binarysearch</a></div><div class="ttdeci">int start_binarysearch(char *receivebuf)</div><div class="ttdoc">Function to proceed with the parity evaluation message.</div><div class="ttdef"><b>Definition:</b> <a href="cascade__biconf_8c_source.html#l00560">cascade_biconf.c:560</a></div></div>
<div class="ttc" id="aecd2_8c_html_a7002d7463cac95a030c281b2bbc0ec63"><div class="ttname"><a href="ecd2_8c.html#a7002d7463cac95a030c281b2bbc0ec63">read_body_from_receivepipe</a></div><div class="ttdeci">int read_body_from_receivepipe()</div><div class="ttdoc">read message body into buffer pointed by readbuf</div><div class="ttdef"><b>Definition:</b> <a href="ecd2_8c_source.html#l00340">ecd2.c:340</a></div></div>
<div class="ttc" id="astructarguments_html_a6afa0ce773c34b814148815675df9a6b"><div class="ttname"><a href="structarguments.html#a6afa0ce773c34b814148815675df9a6b">arguments::remove_raw_keys_after_use</a></div><div class="ttdeci">Boolean remove_raw_keys_after_use</div><div class="ttdef"><b>Definition:</b> <a href="globalvars_8h_source.html#l00079">globalvars.h:79</a></div></div>
<div class="ttc" id="ahelpers_8h_html_a60dccdec5aced9500d5f728bce5b9b3ea61d4048a034b1debc9e694bcbb6ef95c"><div class="ttname"><a href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3ea61d4048a034b1debc9e694bcbb6ef95c">handleId_notifyPipe</a></div><div class="ttdeci">@ handleId_notifyPipe</div><div class="ttdef"><b>Definition:</b> <a href="helpers_8h_source.html#l00062">helpers.h:62</a></div></div>
<div class="ttc" id="apackets_8h_html_aa9c8552878a1ed9945cbf0edef5e0473ace9b05f26a9d017da1aa94ab264b3e54"><div class="ttname"><a href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473ace9b05f26a9d017da1aa94ab264b3e54">SUBTYPE_CASCADE_PARITY_LIST</a></div><div class="ttdeci">@ SUBTYPE_CASCADE_PARITY_LIST</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00046">packets.h:46</a></div></div>
<div class="ttc" id="astructarguments_html_a010b3658a3dcd362f7515ab8a6058d29"><div class="ttname"><a href="structarguments.html#a010b3658a3dcd362f7515ab8a6058d29">arguments::handle</a></div><div class="ttdeci">int handle[handleId_numberOfHandles]</div><div class="ttdef"><b>Definition:</b> <a href="globalvars_8h_source.html#l00086">globalvars.h:86</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a4f5ccce5f92b3b188ac0fa110c47eb2d"><div class="ttname"><a href="defaultdefinitions_8h.html#a4f5ccce5f92b3b188ac0fa110c47eb2d">MIN_ERR_MARGIN</a></div><div class="ttdeci">#define MIN_ERR_MARGIN</div><div class="ttdoc">for checking error margin entries</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00039">defaultdefinitions.h:38</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a8a9b4ad5680d8c98f36fbddcfea13eaa"><div class="ttname"><a href="defaultdefinitions_8h.html#a8a9b4ad5680d8c98f36fbddcfea13eaa">AVG_BINSEARCH_ERR</a></div><div class="ttdeci">#define AVG_BINSEARCH_ERR</div><div class="ttdoc">what I have seen at some point for 10k.</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00063">defaultdefinitions.h:62</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a6c0486d0de2df4486a24c2c2d6837f4f"><div class="ttname"><a href="defaultdefinitions_8h.html#a6c0486d0de2df4486a24c2c2d6837f4f">PERFECT_BELL</a></div><div class="ttdeci">#define PERFECT_BELL</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00066">defaultdefinitions.h:65</a></div></div>
<div class="ttc" id="adebug_8c_html_af8c2db3d81151416ecd3dcb6f38e3711"><div class="ttname"><a href="debug_8c.html#af8c2db3d81151416ecd3dcb6f38e3711">malloc2</a></div><div class="ttdeci">char * malloc2(unsigned int s)</div><div class="ttdoc">malloc wrapper for debugging purposes</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00011">debug.c:11</a></div></div>
<div class="ttc" id="atransferd_8h_html_a217e4b46670419e6c3665b3c9f96b7da"><div class="ttname"><a href="transferd_8h.html#a217e4b46670419e6c3665b3c9f96b7da">opt</a></div><div class="ttdeci">int opt</div><div class="ttdef"><b>Definition:</b> <a href="transferd_8h_source.html#l00321">transferd.h:321</a></div></div>
<div class="ttc" id="apackets_8h_html_aa9c8552878a1ed9945cbf0edef5e0473a68c57f200df424fed82c0bd841968518"><div class="ttname"><a href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473a68c57f200df424fed82c0bd841968518">SUBTYPE_QBER_ESTIM_ACK</a></div><div class="ttdeci">@ SUBTYPE_QBER_ESTIM_ACK</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00045">packets.h:45</a></div></div>
<div class="ttc" id="ahelpers_8h_html_a60dccdec5aced9500d5f728bce5b9b3eab6c38e60aebca3ab02e49e8cb9e9a055"><div class="ttname"><a href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3eab6c38e60aebca3ab02e49e8cb9e9a055">handleId_receivePipe</a></div><div class="ttdeci">@ handleId_receivePipe</div><div class="ttdef"><b>Definition:</b> <a href="helpers_8h_source.html#l00059">helpers.h:59</a></div></div>
<div class="ttc" id="aecd2_8c_html_ab80cb55a1207c201017b8454c3921021"><div class="ttname"><a href="ecd2_8c.html#ab80cb55a1207c201017b8454c3921021">read_header_from_receivepipe</a></div><div class="ttdeci">int read_header_from_receivepipe()</div><div class="ttdoc">read header from receivepipe into msgprotobuf, then malloc a buffer and point to it with readbuf</div><div class="ttdef"><b>Definition:</b> <a href="ecd2_8c_source.html#l00313">ecd2.c:313</a></div></div>
<div class="ttc" id="apriv__amp_8c_html_af014f9642f652afb57efba0d1eddd37b"><div class="ttname"><a href="priv__amp_8c.html#af014f9642f652afb57efba0d1eddd37b">receive_privamp_msg</a></div><div class="ttdeci">int receive_privamp_msg(char *receivebuf)</div><div class="ttdoc">Function to process a privacy amplification message.</div><div class="ttdef"><b>Definition:</b> <a href="priv__amp_8c_source.html#l00073">priv_amp.c:73</a></div></div>
<div class="ttc" id="ahelpers_8h_html_a60dccdec5aced9500d5f728bce5b9b3eabe5df9279ffaaaf0127ed51063932c1e"><div class="ttname"><a href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3eabe5df9279ffaaaf0127ed51063932c1e">handleId_numberOfHandles</a></div><div class="ttdeci">@ handleId_numberOfHandles</div><div class="ttdef"><b>Definition:</b> <a href="helpers_8h_source.html#l00066">helpers.h:65</a></div></div>
<div class="ttc" id="astructarguments_html_ae86a9d076ca954b1f0800c2a18338727"><div class="ttname"><a href="structarguments.html#ae86a9d076ca954b1f0800c2a18338727">arguments::skip_qber_estimation</a></div><div class="ttdeci">Boolean skip_qber_estimation</div><div class="ttdoc">used by qber_estim</div><div class="ttdef"><b>Definition:</b> <a href="globalvars_8h_source.html#l00080">globalvars.h:80</a></div></div>
<div class="ttc" id="astructpacket__received_html_ad3821c84e373dee38d7ff84f3876fa7c"><div class="ttname"><a href="structpacket__received.html#ad3821c84e373dee38d7ff84f3876fa7c">packet_received::next</a></div><div class="ttdeci">struct packet_received * next</div><div class="ttdoc">next in chain</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00229">packets.h:229</a></div></div>
<div class="ttc" id="astructpacket__received_html_ae314ec09eb8040ccf4dec6d28c57f148"><div class="ttname"><a href="structpacket__received.html#ae314ec09eb8040ccf4dec6d28c57f148">packet_received::packet</a></div><div class="ttdeci">char * packet</div><div class="ttdoc">pointer to content</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00228">packets.h:228</a></div></div>
<div class="ttc" id="atransferd_8h_html_a7f345697df7eb20c9aba1ab6980cae8f"><div class="ttname"><a href="transferd_8h.html#a7f345697df7eb20c9aba1ab6980cae8f">retval</a></div><div class="ttdeci">int retval</div><div class="ttdef"><b>Definition:</b> <a href="transferd_8h_source.html#l00321">transferd.h:321</a></div></div>
<div class="ttc" id="astructpacket__received_html"><div class="ttname"><a href="structpacket__received.html">packet_received</a></div><div class="ttdoc">structure to hold received messages</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00226">packets.h:226</a></div></div>
<div class="ttc" id="astructarguments_html_af2b10ffb22553532bea52f212afe61e1"><div class="ttname"><a href="structarguments.html#af2b10ffb22553532bea52f212afe61e1">arguments::runtimeerrormode</a></div><div class="ttdeci">enum arguments::@1 runtimeerrormode</div><div class="ttdoc">Determines the way how to react on errors which should not stop the demon.</div></div>
<div class="ttc" id="astruct_e_r_r_c___p_r_o_t_o_html"><div class="ttname"><a href="struct_e_r_r_c___p_r_o_t_o.html">ERRC_PROTO</a></div><div class="ttdoc">this one is just a mockup for reading a message to determine its length.</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00059">packets.h:59</a></div></div>
<div class="ttc" id="astructpacket__to__send_html_ad0befdf18a26825a57674a4f59986ca2"><div class="ttname"><a href="structpacket__to__send.html#ad0befdf18a26825a57674a4f59986ca2">packet_to_send::length</a></div><div class="ttdeci">int length</div><div class="ttdoc">in bytes</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00217">packets.h:217</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a3f3192b59954406225891ead671764ec"><div class="ttname"><a href="defaultdefinitions_8h.html#a3f3192b59954406225891ead671764ec">MIN_INI_ERR</a></div><div class="ttdeci">#define MIN_INI_ERR</div><div class="ttdoc">for checking entries</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00042">defaultdefinitions.h:41</a></div></div>
<div class="ttc" id="apackets_8h_html_aa9c8552878a1ed9945cbf0edef5e0473add392aa99f6aa9e06ae30450aef657c5"><div class="ttname"><a href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473add392aa99f6aa9e06ae30450aef657c5">SUBTYPE_QBER_ESTIM</a></div><div class="ttdeci">@ SUBTYPE_QBER_ESTIM</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00043">packets.h:43</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a6a5a750b1c467bf24f5f922a5339b4e3"><div class="ttname"><a href="defaultdefinitions_8h.html#a6a5a750b1c467bf24f5f922a5339b4e3">DEFAULT_ERR_MARGIN</a></div><div class="ttdeci">#define DEFAULT_ERR_MARGIN</div><div class="ttdoc">eavesdropper is assumed to have full knowledge on raw key</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00038">defaultdefinitions.h:37</a></div></div>
<div class="ttc" id="apackets_8h_html_aa9c8552878a1ed9945cbf0edef5e0473a910eac00d12d4ce4c61172cfe48c0bd0"><div class="ttname"><a href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473a910eac00d12d4ce4c61172cfe48c0bd0">SUBTYPE_START_PRIV_AMP</a></div><div class="ttdeci">@ SUBTYPE_START_PRIV_AMP</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00051">packets.h:50</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_ae7d38601dfbd73adbe5c1b3ec34e0e13af9d46b7804d93a4fcde88489a1b68c24"><div class="ttname"><a href="defaultdefinitions_8h.html#ae7d38601dfbd73adbe5c1b3ec34e0e13af9d46b7804d93a4fcde88489a1b68c24">False</a></div><div class="ttdeci">@ False</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00068">defaultdefinitions.h:68</a></div></div>
<div class="ttc" id="acascade__biconf_8c_html_a880762f9d0d644e11eb2483c17478a91"><div class="ttname"><a href="cascade__biconf_8c.html#a880762f9d0d644e11eb2483c17478a91">process_binarysearch</a></div><div class="ttdeci">int process_binarysearch(char *receivebuf)</div><div class="ttdoc">Alice's wrapper function to process a binarysearch request.</div><div class="ttdef"><b>Definition:</b> <a href="cascade__biconf_8c_source.html#l00627">cascade_biconf.c:627</a></div></div>
<div class="ttc" id="aglobalvars_8h_html_ad2ccf7edc49e0e4e4d3f6c40df187f9b"><div class="ttname"><a href="globalvars_8h.html#ad2ccf7edc49e0e4e4d3f6c40df187f9b">next_packet_to_send</a></div><div class="ttdeci">struct packet_to_send * next_packet_to_send</div><div class="ttdef"><b>Definition:</b> <a href="ecd2_8h_source.html#l00209">ecd2.h:209</a></div></div>
<div class="ttc" id="ahelpers_8h_html_a60dccdec5aced9500d5f728bce5b9b3ea359a6ff399089b29328c9e6dc731c354"><div class="ttname"><a href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3ea359a6ff399089b29328c9e6dc731c354">handleId_sendPipe</a></div><div class="ttdeci">@ handleId_sendPipe</div><div class="ttdef"><b>Definition:</b> <a href="helpers_8h_source.html#l00058">helpers.h:58</a></div></div>
<div class="ttc" id="astructarguments_html_af78000c59f253e0d7c3ca2f9fb3075c8"><div class="ttname"><a href="structarguments.html#af78000c59f253e0d7c3ca2f9fb3075c8">arguments::bellmode</a></div><div class="ttdeci">Boolean bellmode</div><div class="ttdoc">Expect to receive a value for the Bell violation param, used by priv_amp.</div><div class="ttdef"><b>Definition:</b> <a href="globalvars_8h_source.html#l00081">globalvars.h:81</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a641524b6c330d204b7aa26d2e57b9c4e"><div class="ttname"><a href="defaultdefinitions_8h.html#a641524b6c330d204b7aa26d2e57b9c4e">CMD_INBUFLEN</a></div><div class="ttdeci">#define CMD_INBUFLEN</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00065">defaultdefinitions.h:64</a></div></div>
<div class="ttc" id="astructarguments_html_ae541e46d81115b150ccff5b388741f9c"><div class="ttname"><a href="structarguments.html#ae541e46d81115b150ccff5b388741f9c">arguments::verbosity_level</a></div><div class="ttdeci">enum arguments::@0 verbosity_level</div><div class="ttdoc">verbosity level of output, used by priv_amp</div></div>
<div class="ttc" id="apackets_8h_html_aa9c8552878a1ed9945cbf0edef5e0473adb9a11791d800de7b6f4eceac5a87b19"><div class="ttname"><a href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473adb9a11791d800de7b6f4eceac5a87b19">SUBTYPE_CASCADE_BIN_SEARCH_MSG</a></div><div class="ttdeci">@ SUBTYPE_CASCADE_BIN_SEARCH_MSG</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00047">packets.h:47</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a74d8d9c4048eafb7f5406f32ebbe4fad"><div class="ttname"><a href="defaultdefinitions_8h.html#a74d8d9c4048eafb7f5406f32ebbe4fad">MAX_INI_ERR</a></div><div class="ttdeci">#define MAX_INI_ERR</div><div class="ttdoc">for checking entries</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00043">defaultdefinitions.h:42</a></div></div>
<div class="ttc" id="astructarguments_html_a53a2a52420c14917ea4eaf982f4c2141"><div class="ttname"><a href="structarguments.html#a53a2a52420c14917ea4eaf982f4c2141">arguments::biconf_rounds</a></div><div class="ttdeci">int biconf_rounds</div><div class="ttdoc">number of biconf rounds, used by cascade_biconf</div><div class="ttdef"><b>Definition:</b> <a href="globalvars_8h_source.html#l00069">globalvars.h:69</a></div></div>
<div class="ttc" id="aecd2_8c_html_a533d8ed350c93589b514cc9b2d7ec4e6"><div class="ttname"><a href="ecd2_8c.html#a533d8ed350c93589b514cc9b2d7ec4e6">parse_options</a></div><div class="ttdeci">int parse_options(int argc, char *argv[])</div><div class="ttdoc">Parse arguments on initialization.</div><div class="ttdef"><b>Definition:</b> <a href="ecd2_8c_source.html#l00023">ecd2.c:23</a></div></div>
<div class="ttc" id="astructarguments_html_acb34c8b6cb0bb283ab18ae33c2fcee21"><div class="ttname"><a href="structarguments.html#acb34c8b6cb0bb283ab18ae33c2fcee21">arguments::fhandle</a></div><div class="ttdeci">FILE * fhandle[8]</div><div class="ttdef"><b>Definition:</b> <a href="globalvars_8h_source.html#l00087">globalvars.h:87</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a4b88e1eaa0cd37a9a2e207e345146669"><div class="ttname"><a href="defaultdefinitions_8h.html#a4b88e1eaa0cd37a9a2e207e345146669">MAX_INTRINSIC</a></div><div class="ttdeci">#define MAX_INTRINSIC</div><div class="ttdoc">just a safe margin</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00049">defaultdefinitions.h:48</a></div></div>
<div class="ttc" id="apackets_8h_html_aa9c8552878a1ed9945cbf0edef5e0473a0cd36c9364a3e0096ae8fc9864c42256"><div class="ttname"><a href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473a0cd36c9364a3e0096ae8fc9864c42256">SUBTYPE_CASCADE_BICONF_INIT_REQ</a></div><div class="ttdeci">@ SUBTYPE_CASCADE_BICONF_INIT_REQ</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00048">packets.h:48</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_ae728dda749d80a0faba6d076d2c5efcb"><div class="ttname"><a href="defaultdefinitions_8h.html#ae728dda749d80a0faba6d076d2c5efcb">MAXRUNTIMEERROR</a></div><div class="ttdeci">#define MAXRUNTIMEERROR</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00051">defaultdefinitions.h:50</a></div></div>
<div class="ttc" id="aglobalvars_8h_html_a533147eb4caa484f9a001a15a2a376d5"><div class="ttname"><a href="globalvars_8h.html#a533147eb4caa484f9a001a15a2a376d5">last_packet_to_send</a></div><div class="ttdeci">struct packet_to_send * last_packet_to_send</div><div class="ttdef"><b>Definition:</b> <a href="ecd2_8h_source.html#l00210">ecd2.h:210</a></div></div>
<div class="ttc" id="astructarguments_html_a711839aa2b1afa834c68af6b96ef04d5"><div class="ttname"><a href="structarguments.html#a711839aa2b1afa834c68af6b96ef04d5">arguments::disable_privacyamplification</a></div><div class="ttdeci">Boolean disable_privacyamplification</div><div class="ttdoc">used by priv_amp</div><div class="ttdef"><b>Definition:</b> <a href="globalvars_8h_source.html#l00082">globalvars.h:82</a></div></div>
<div class="ttc" id="acascade__biconf_8c_html_a11ff668df61f51cc3f7e527cef353661"><div class="ttname"><a href="cascade__biconf_8c.html#a11ff668df61f51cc3f7e527cef353661">generate_biconfreply</a></div><div class="ttdeci">int generate_biconfreply(char *receivebuf)</div><div class="ttdoc">Start the parity generation process on Alice side.</div><div class="ttdef"><b>Definition:</b> <a href="cascade__biconf_8c_source.html#l00427">cascade_biconf.c:427</a></div></div>
<div class="ttc" id="astructpacket__to__send_html_a3a11edfcaec956d36622c5131abdf239"><div class="ttname"><a href="structpacket__to__send.html#a3a11edfcaec956d36622c5131abdf239">packet_to_send::next</a></div><div class="ttdeci">struct packet_to_send * next</div><div class="ttdoc">next one to send</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00219">packets.h:219</a></div></div>
<div class="ttc" id="aecd2_8c_html_afcf673b3dfbe3832a1908ab68b0a9a43"><div class="ttname"><a href="ecd2_8c.html#afcf673b3dfbe3832a1908ab68b0a9a43">create_thread_and_start_qber_using_cmd</a></div><div class="ttdeci">int create_thread_and_start_qber_using_cmd(char *dpnt, char *cmd_input)</div><div class="ttdoc">Create a thread and start qber based on the cmd stored in cimd_input.</div><div class="ttdef"><b>Definition:</b> <a href="ecd2_8c_source.html#l00225">ecd2.c:225</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a9d44da3acc0519f827e8fc5c67754ac0"><div class="ttname"><a href="defaultdefinitions_8h.html#a9d44da3acc0519f827e8fc5c67754ac0">MAX_BICONF_ROUNDS</a></div><div class="ttdeci">#define MAX_BICONF_ROUNDS</div><div class="ttdoc">enough for BER &lt; 10^-27</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00062">defaultdefinitions.h:61</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a94c768f8a25f442a8e10e5cdd446eb58"><div class="ttname"><a href="defaultdefinitions_8h.html#a94c768f8a25f442a8e10e5cdd446eb58">DEFAULT_BICONF_ROUNDS</a></div><div class="ttdeci">#define DEFAULT_BICONF_ROUNDS</div><div class="ttdoc">number of BICONF rounds</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00061">defaultdefinitions.h:60</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_ad53a417c047d3d5cee5401496f5e06ca"><div class="ttname"><a href="defaultdefinitions_8h.html#ad53a417c047d3d5cee5401496f5e06ca">DEFAULT_RUNTIMEERRORMODE</a></div><div class="ttdeci">#define DEFAULT_RUNTIMEERRORMODE</div><div class="ttdoc">all error s stop daemon</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00050">defaultdefinitions.h:49</a></div></div>
<div class="ttc" id="aglobalvars_8h_html_a7f5d903352c2133a67099abbf29041dc"><div class="ttname"><a href="globalvars_8h.html#a7f5d903352c2133a67099abbf29041dc">blocklist</a></div><div class="ttdeci">struct blockpointer * blocklist</div><div class="ttdef"><b>Definition:</b> <a href="ecd2_8h_source.html#l00208">ecd2.h:208</a></div></div>
<div class="ttc" id="aecd2_8c_html_acc11047ebb7d577c2bef453dcac255b3"><div class="ttname"><a href="ecd2_8c.html#acc11047ebb7d577c2bef453dcac255b3">read_from_cmdpipe</a></div><div class="ttdeci">int read_from_cmdpipe(char *cmd_input)</div><div class="ttdoc">read command from cmdpipe into cmd_input</div><div class="ttdef"><b>Definition:</b> <a href="ecd2_8c_source.html#l00201">ecd2.c:201</a></div></div>
<div class="ttc" id="astructpacket__received_html_a8131ca2174b6e6ec87350ed4e2280616"><div class="ttname"><a href="structpacket__received.html#a8131ca2174b6e6ec87350ed4e2280616">packet_received::length</a></div><div class="ttdeci">int length</div><div class="ttdoc">in bytes</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00227">packets.h:227</a></div></div>
<div class="ttc" id="atransferd_8h_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="transferd_8h.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="transferd_8h_source.html#l00321">transferd.h:321</a></div></div>
<div class="ttc" id="apackets_8h_html_aa9c8552878a1ed9945cbf0edef5e0473a380292092f2fa7462f2d0ac084d86ab5"><div class="ttname"><a href="packets_8h.html#aa9c8552878a1ed9945cbf0edef5e0473a380292092f2fa7462f2d0ac084d86ab5">SUBTYPE_CASCADE_BICONF_PARITY_RESP</a></div><div class="ttdeci">@ SUBTYPE_CASCADE_BICONF_PARITY_RESP</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00049">packets.h:49</a></div></div>
<div class="ttc" id="aecd2_8c_html_aa3ad63163e9bd051e3a96cee884d1f9c"><div class="ttname"><a href="ecd2_8c.html#aa3ad63163e9bd051e3a96cee884d1f9c">write_into_sendpipe</a></div><div class="ttdeci">int write_into_sendpipe()</div><div class="ttdoc">write data from next_packet_to_send into sendpipe</div><div class="ttdef"><b>Definition:</b> <a href="ecd2_8c_source.html#l00170">ecd2.c:170</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a98e046db9316871de564e6a4b966775c"><div class="ttname"><a href="defaultdefinitions_8h.html#a98e046db9316871de564e6a4b966775c">DEFAULT_KILLMODE</a></div><div class="ttdeci">#define DEFAULT_KILLMODE</div><div class="ttdoc">no raw key files are removed by default</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00047">defaultdefinitions.h:46</a></div></div>
<div class="ttc" id="astructarguments_html_ae6c6810b046333fb7f8441f0320c60e8"><div class="ttname"><a href="structarguments.html#ae6c6810b046333fb7f8441f0320c60e8">arguments::initialerr</a></div><div class="ttdeci">float initialerr</div><div class="ttdoc">What error to assume initially.</div><div class="ttdef"><b>Definition:</b> <a href="globalvars_8h_source.html#l00071">globalvars.h:71</a></div></div>
<div class="ttc" id="astructarguments_html_a0f97538134f3dbe06bdc5b0b1a4fee66"><div class="ttname"><a href="structarguments.html#a0f97538134f3dbe06bdc5b0b1a4fee66">arguments::intrinsicerr</a></div><div class="ttdeci">float intrinsicerr</div><div class="ttdoc">error rate generated outside eavesdropper, used by priv_amp</div><div class="ttdef"><b>Definition:</b> <a href="globalvars_8h_source.html#l00072">globalvars.h:72</a></div></div>
<div class="ttc" id="ahelpers_8h_html_a60dccdec5aced9500d5f728bce5b9b3ead4e3e7fcb78a7102c557c39aa1f200a5"><div class="ttname"><a href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3ead4e3e7fcb78a7102c557c39aa1f200a5">handleId_queryRespPipe</a></div><div class="ttdeci">@ handleId_queryRespPipe</div><div class="ttdef"><b>Definition:</b> <a href="helpers_8h_source.html#l00064">helpers.h:64</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a948dac9319990b61eba637ea0df78176"><div class="ttname"><a href="defaultdefinitions_8h.html#a948dac9319990b61eba637ea0df78176">MAX_ERR_MARGIN</a></div><div class="ttdeci">#define MAX_ERR_MARGIN</div><div class="ttdoc">for checking error margin entries</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00040">defaultdefinitions.h:39</a></div></div>
<div class="ttc" id="adefaultdefinitions_8h_html_a434ff7ba8a95fc500000c6b94677aee2"><div class="ttname"><a href="defaultdefinitions_8h.html#a434ff7ba8a95fc500000c6b94677aee2">DEFAULT_INITIAL_ERR</a></div><div class="ttdeci">#define DEFAULT_INITIAL_ERR</div><div class="ttdoc">initial error rate</div><div class="ttdef"><b>Definition:</b> <a href="defaultdefinitions_8h_source.html#l00041">defaultdefinitions.h:40</a></div></div>
<div class="ttc" id="aecd2_8c_html_acd2e1b2dee36ccbff485d8e70b117170"><div class="ttname"><a href="ecd2_8c.html#acd2e1b2dee36ccbff485d8e70b117170">emsg</a></div><div class="ttdeci">int emsg(int code)</div><div class="ttdoc">Print error message based on err code.</div><div class="ttdef"><b>Definition:</b> <a href="ecd2_8c_source.html#l00011">ecd2.c:11</a></div></div>
<div class="ttc" id="astructpacket__to__send_html"><div class="ttname"><a href="structpacket__to__send.html">packet_to_send</a></div><div class="ttdoc">structure which holds packets to send</div><div class="ttdef"><b>Definition:</b> <a href="packets_8h_source.html#l00216">packets.h:216</a></div></div>
<div class="ttc" id="ahelpers_8h_html_a60dccdec5aced9500d5f728bce5b9b3ea9902f55cc4b636c1f2501e7892ffdf80"><div class="ttname"><a href="helpers_8h.html#a60dccdec5aced9500d5f728bce5b9b3ea9902f55cc4b636c1f2501e7892ffdf80">handleId_commandPipe</a></div><div class="ttdeci">@ handleId_commandPipe</div><div class="ttdef"><b>Definition:</b> <a href="helpers_8h_source.html#l00057">helpers.h:57</a></div></div>
<div class="ttc" id="atransferd_8h_html_ad996a74def8417bb467ec4af72f1073b"><div class="ttname"><a href="transferd_8h.html#ad996a74def8417bb467ec4af72f1073b">HALFSECOND</a></div><div class="ttdeci">struct timeval HALFSECOND</div><div class="ttdef"><b>Definition:</b> <a href="transferd_8h_source.html#l00226">transferd.h:313</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_69202652be06fd0e05a491cdb470f56e.html">errorcorrection</a></li><li class="navelem"><a class="el" href="ecd2_8h.html">ecd2.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.19 </li>
  </ul>
</div>
</body>
</html>
