<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.19"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>qCrypto: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">qCrypto
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">A collection of code for a practical entanglement-based quantum key distribution system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_hardware_timestampfirmware__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This directory contains the the firmware for a Cypress FX2 chip, together with some support files for the usb part of the timestamp unit.</p>
<p>The files in this directory are:</p>
<p>Makefile used to generate the firmware file in various formats, and also to generate all the memory map and direct assembler files. Generates hexcode which can be uploaded into the FX2 chip with the upload script.</p>
<p><a class="el" href="fifobithelpers_8h.html">fifobithelpers.h</a> Some definitions which lines of the core timestamp unit are connected to the fx2 chip</p>
<p><a class="el" href="fx2regs__c_8h.html">fx2regs_c.h</a> external file for fx2 register definitions from Christer Weinigel, Nordnav Technologies A</p>
<p><a class="el" href="tp8_8c.html">tp8.c</a> The firmware code itself</p>
<p>upload A loader script to get the firmware into an unprogrammed FX2 chip. A modified code can be used to flash an EEPROM but this requires the Vend_Ax.hex file from the FX2 development kit and I have no idea about the license</p>
<p>usbtimetagio.h Header file, mainly for ioctl definitions for a higher level usb driver on a host machine, but reused here for command parsing in the EP1 interpreter function.</p>
<p>PREREQUISITS:</p>
<p>The code is written for a sdcc compiler, which should be installed on the compiling system, probably together with the corresponding binutils.</p>
<p>COMPILATION:</p>
<p>A modified version of the code can be generated via the makefile; for the code to work properly, it is necessary to check that the descriptor tables in the final code end up on an even address. This information is extracted out of the .rst files when calling the make command. In case they end up on an odd address, the filler variable xuxu needs to be adjusted accordingly.</p>
<p>UPLOADING:</p>
<p>The upload script loads the firmware in a pristine FX2 chip, which then re-enumberates as the new USB device. The code can also loaded into the external EEPROM.</p>
<p>USB ISSUES:</p>
<p>The code uses a somewhat dirty USB device identification by retaining the vendor ID for the FX2 (Cypress, ID 0x04b4), and a phantasy device identifier (namely 0x1234). If Cypress decides to assign that particular device at some point, there may be a conflict with this firmware. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.19 </li>
  </ul>
</div>
</body>
</html>
