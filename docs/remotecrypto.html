<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.19"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>qCrypto: remotecrypto</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">qCrypto
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">A collection of code for a practical entanglement-based quantum key distribution system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('remotecrypto.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">remotecrypto </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_remotecrypto_README"></a> This README is located in <code>qcrypto/remotecrypto/</code>.</p>
<p>The remotecrypto directory contains the bulk of the QKD suite and deals mainly in the sifting portion of the code, from the classical channel (transferd), cross correlation modules (pfind &amp; costream) and sifting modules (chopper, splicer). It would be a good idea to read <a class="el" href="filespec.html">Packet Headers (filespec)</a> to understand how the components communicate.</p>
<p>This is a futile attempt of documenting the different programs for the quantum key distribution suite. It is notoriously incomplete, and the reader is strongly advised to consult the C code of the programs for coments and usage information.</p>
<p>LICENSE</p>
<p>Copyright (C) 2005-2006 Christian Kurtsiefer, National University of Singapore <a href="#" onclick="location.href='mai'+'lto:'+'chr'+'is'+'tia'+'n.'+'kur'+'ts'+'ief'+'er'+'@gm'+'ai'+'l.c'+'om'; return false;">chris<span style="display: none;">.nosp@m.</span>tian<span style="display: none;">.nosp@m.</span>.kurt<span style="display: none;">.nosp@m.</span>sief<span style="display: none;">.nosp@m.</span>er@gm<span style="display: none;">.nosp@m.</span>ail.<span style="display: none;">.nosp@m.</span>com</a></p>
<p>This source code is free software; you can redistribute it and/or modify it under the terms of the GNU Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>
<p>This source code is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. Please refer to the GNU Public License for more details.</p>
<p>You should have received a copy of the GNU Public License along with this source code; if not, write to: Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</p>
<p>PREREQUISITES</p>
<p>This directory contains the core processing programs for a BB84 type key generation scheme. In order to work properly with the hardware, the user program for the timestamp card, and a device driver for the appropriate interface are needed as well. For the USB-interfaced timestamp card, these directories are usbtimetagdriver and timestamp3, or the earlier version timestamp2. For the PCI card based version, a nudaq7200 driver and the timestamp directory is needed.</p>
<p>The error correction suite can be found in the ec2 directory, also outside this core directory.</p>
<p>For proper operation of the gui, the following links from extal directories into this one are needed:</p>
<p>A symbolic link to the current readevents program should be set under the name "readevents". This can be done e.g. with the command ln -s ../timestamp3/readevents3 ./readevents The readevents program is the user side part of the interface to talk to the timestamp card. It tries to efficiently (as in avoidance of memcpy type code) parse the raw data containing the phase pattern, coarse and fine counter info, and event register into a single timestamp structure of 64 bit. There is an option to splice in individual detector delays, and an absolute time information from the system gettime call. This is the default operation for the crypto applicatons.</p>
<p>Another symbolic link is needed for getting the error correction deamon running; target name has to be "errcd". This can be done with the command ln -s ../ec2/ecd2 errcd</p>
<p>REQUIREMENTS</p>
<p>A usual gcc development environment is necessary.</p>
<p>For proper operation of the initial time difference finding, the fftw3 library and corresponding header file needs to be installed for the fast fourier code.</p>
<p>Gnuplot needs to be installed as it is the graphical rendering engine for displaying mointor data.</p>
<p>RATIONALE</p>
<p>The code is written such that it can operate as asynchronously as possible with large ammounts of binary data, there should be a minimum of latency problems in interprocess communication. In order to allow for modularized testing and operation, the code leaves large data in individual files, and only exchanges low bandwidth textual control information via pipes. The hope is that with modern disk cache techniques, none of the big data files makes it ever physically onto the hard disk, because files are removed upon consumption by the consuming code. This way, both flexibility in reconfiguration and debugging was supposed to be ensured, and in normal usage, disk write speed limitation should never be a concern.</p>
<p>These intermediate files are mostly of binary structure, with a header/content structure as described in the filespec.txt file.</p>
<p>OPERATING MODES</p>
<p>The programs are tailored for various operation modes, namely the service mode and the key generatio nmode. In service mode, the full detector information is transmitted to the other side to allow for source alignment, fiber neutralization etc. In this mode, the full measurement information is revealed to the other side, and thus also exposed to an eavesdropper. This is obviously not ssecure. The BB84 mode does not transmit this information.</p>
<p>CORE OPERATING PROGRAMS</p>
<p><a class="el" href="chopper_8c.html">chopper.c</a>: Partitioner and timing data compressor, low cnt side</p>
<p>This code digests the raw timestamp output from the readevents program into packets of compressed timing/basis information (t2 files) to the other side, splices timestamp and CPU timing for long time rollover information, and generates local mesaurement result files for processing until the coincindece identification unit returns an acknowledgement. It typically operates (and was tested) in a mode where the input comes form a named pipe, and the output packets are stored in a directory. Various notification and log information options are given to allow a control program to act accordingly upon finished epoch packets. Details of the compression in the T2 file spec and the code directly.</p>
<p><a class="el" href="chopper2_8c.html">chopper2.c</a>: Partitioner on the high count side</p>
<p>Similar to chopper, this code partitions raw data generated from the readevents program, but does no timing compression, as it is suposed to be digested by the costream program directly. Typically it generates t1 files into a directory, and notifies a consumer program via a log file or a text pipe.</p>
<p><a class="el" href="transferd_8c.html">transferd.c</a>: Classical communication gateway</p>
<p>This code somewhat independently transfers files from various directories via a single TCP port to the other machine, and also has some specific pipes for GUI and error correction communication in place such that these units can communicate independently. The program is used symmetrically on both sides.</p>
<p><a class="el" href="pfind_8c.html">pfind.c</a>: Initial timing difference finder.</p>
<p>This code takes some T1 and T2 files, and extracts the initial timing difference out of them to initiate the clock tracker in the the costream code. AS a status information, it emits also the Signal-to-noise ratio with which the peak in the cross correlation function was found. This allows to assess the validity of the result. Parameters for this program are the number of epochs to be considered, and the depth for the FFT. Typically, the FFTs are carried out over 2^17 or 2^19 elements under high background/signal conditions. It returns the time difference with an accuracy of 2 nsec. Be aware that for proper functionality, the time difference between the two sides needs to be better than about 400msec. This accuracy between two host computers should be established using an NTP server or similar.</p>
<p><a class="el" href="costream_8c.html">costream.c</a>: Main coincidence identification / sifting code / clock tracking</p>
<p><a class="el" href="splicer_8c.html">splicer.c</a>: carries out the final sifting stage on the low count rate side</p>
<p>crgui_ec: TCL/Tk GUI to tie all the codes together.</p>
<p>I know it sucks, has many missing interlocks for buttons etc, but it works for our purposes.</p>
<p>localparams: A complementary file for the gui</p>
<p>Used for storing individual detector delays, and some default params like machine address, target IP etc.</p>
<p><a class="el" href="diagnosis_8c.html">diagnosis.c</a>: for analyzing raw key files in service mode</p>
<p>This code is used to generate a correlation matrix from t3 files, and just counts various detector combination events in that file.</p>
<p><a class="el" href="diagbb84_8c.html">diagbb84.c</a>: Just extracts the length of a bb84 raw key file.</p>
<p><a class="el" href="getrate_8c.html">getrate.c</a>: Converts the output from the timestamp unit in rates.</p>
<p>This code is used for alignment purposes.</p>
<p>AUXILIARY PROCESSING CODE</p>
<p><a class="el" href="decompress_8c.html">decompress.c</a>: converts compressed t2 files into hex files</p>
<p>Used for debugging the chopper algorithm.</p>
<p><a class="el" href="ffind_8c.html">ffind.c</a> : Early testing version for the time difference finding program</p>
<p>uses plain ascii text for timing information. See header for more description.</p>
<p>DOCUMENTATION FILES</p>
<p>filespec.txt: Main description of all the binary file formats.</p>
<p>epochdefinition: An incomplete writeup of the timing format used to partition all timing key and communication elements.</p>
<p>gui_spec: An incomplete writeup of communication snippets between the GUI running on both sides</p>
<p>convertdate: A short shell script to convert an epoch index into a human-readable date</p>
<p>convertdate_back: A shell script to convert soe time/date string into an epoch </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">README</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.19 </li>
  </ul>
</div>
</body>
</html>
